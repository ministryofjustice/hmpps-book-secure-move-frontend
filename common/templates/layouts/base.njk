{% extends "govuk/template.njk" %}

{# GOV.UK Design System Components #}
{% from "govuk/components/back-link/macro.njk"         import govukBackLink %}
{% from "govuk/components/breadcrumbs/macro.njk"       import govukBreadcrumbs %}
{% from "govuk/components/button/macro.njk"            import govukButton %}
{% from "govuk/components/checkboxes/macro.njk"        import govukCheckboxes %}
{% from "govuk/components/cookie-banner/macro.njk"     import govukCookieBanner %}
{% from "govuk/components/details/macro.njk"           import govukDetails %}
{% from "govuk/components/error-summary/macro.njk"     import govukErrorSummary %}
{% from "govuk/components/footer/macro.njk"            import govukFooter %}
{% from "govuk/components/input/macro.njk"             import govukInput %}
{% from "govuk/components/inset-text/macro.njk"        import govukInsetText %}
{% from "govuk/components/panel/macro.njk"             import govukPanel %}
{% from "govuk/components/radios/macro.njk"            import govukRadios %}
{% from "govuk/components/select/macro.njk"            import govukSelect %}
{% from "govuk/components/summary-list/macro.njk"      import govukSummaryList %}
{% from "govuk/components/tag/macro.njk"               import govukTag %}
{% from "govuk/components/textarea/macro.njk"          import govukTextarea %}
{% from "govuk/components/warning-text/macro.njk"      import govukWarningText %}
{% from "govuk/components/table/macro.njk"             import govukTable %}
{% from "govuk/components/date-input/macro.njk"        import govukDateInput %}

{% from "moj/components/badge/macro.njk"                  import mojBadge %}
{% from "moj/components/organisation-switcher/macro.njk"  import mojOrganisationSwitcher %}
{% from "moj/components/primary-navigation/macro.njk"     import mojPrimaryNavigation %}
{% from "moj/components/date-picker/macro.njk"            import mojDatePicker %}

{# App level components #}
{% from "raw/macro.njk"               import raw %}
{% from "add-another/macro.njk"       import appAddAnother %}
{% from "card/macro.njk"              import appCard %}
{% from "data/macro.njk"              import appData %}
{% from "feedback-prompt/macro.njk"   import appFeedbackPrompt %}
{% from "filter/macro.njk"            import appFilter %}
{% from "framework-response/macro.njk"import appFrameworkResponse %}
{% from "identity-bar/macro.njk"      import appIdentityBar %}
{% from "internal-header/macro.njk"   import appInternalHeader %}
{% from "map/macro.njk"               import appMap %}
{% from "message/macro.njk"           import appMessage %}
{% from "meta-list/macro.njk"         import appMetaList %}
{% from "multi-file-upload/macro.njk" import appMultiFileUpload %}
{% from "pagination/macro.njk"        import appPagination %}
{% from "panel/macro.njk"             import appPanel %}
{% from "read-only-field/macro.njk"   import appReadOnlyField %}
{% from "request-filter/macro.njk"    import appRequestFilter %}
{% from "tag/macro.njk"               import appTag %}
{% from "task-list/macro.njk"         import appTaskList %}
{% from "time/macro.njk"              import appTime %}
{% from "timeline/macro.njk"          import appTimeline %}
{% from "whats-new-banner/macro.njk"  import appWhatsNewBanner %}
{% from "notification-banner/macro.njk"  import appNotificationBanner %}

{% block head %}
  <link rel="canonical" href="{{ CANONICAL_URL }}">

  <meta name="location" content="{{ CURRENT_LOCATION.id }}">

  <link href="{{ getAssetPath('styles.css') }}" media="all" rel="stylesheet" type="text/css" />

  <link rel="preload" href="{{ getAssetPath('fonts/Inter-Bold.woff2') }}" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="{{ getAssetPath('fonts/Inter-Regular.woff2') }}" as="font" type="font/woff2" crossorigin>
  {% if GA_ID %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ GA_ID }}"></script>
    <script nonce="{{ cspNonce }}">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      {% block customGtagConfig %}{% endblock %}
      gtag('config', '{{ GA_ID }}', {
        'user_id': '{{ USER.userId }}'
      });
    </script>
  {% endif %}

{% endblock %}

{% block pageTitle %}
  {{ SERVICE_NAME }}
{% endblock %}

{% block headIcons %}
  <link rel="shortcut icon" sizes="16x16 32x32 48x48" href="{{ getAssetPath('images/favicon.ico') }}" type="image/x-icon"/>
  <link rel="apple-touch-icon" sizes="180x180" href="{{ getAssetPath('images/hmpps-apple-touch-icon-180x180.png') }}">
  <link rel="apple-touch-icon" sizes="167x167" href="{{ getAssetPath('images/hmpps-apple-touch-icon-167x167.png') }}">
  <link rel="apple-touch-icon" sizes="152x152" href="{{ getAssetPath('images/hmpps-apple-touch-icon-152x152.png') }}">
  <link rel="apple-touch-icon" href="{{ getAssetPath('images/hmpps-apple-touch-icon.png') }}">
{% endblock %}

{% block bodyStart %}

  {% if GA_ID %}
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id={{ GA_ID }}"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
  {% endif %}
{% endblock %}

{% block header %}
  {{ appInternalHeader({
    organisationHomepageUrl: AUTH_BASE_URL + "/auth",
    homepageUrl: "/",
    siteName: "HMPPS",
    fallbackImagePath: getAssetPath('images/app-logotype-crest@2x.png'),
    productName: SERVICE_NAME,
    navigation: [
      {
        href: AUTH_BASE_URL + "/auth/account-details",
        text: USER.displayName,
        subtext: "Manage your details"
      },
      {
        href: "/auth/sign-out",
        text: t("actions::sign_out")
      }
    ]
  }) }}

  {% block primaryNavigation %}
    {{ mojPrimaryNavigation({
      label: 'Primary navigation',
      items: primaryNavigation
    }) }}
  {% endblock %}
  {% block organisationSwitcher %}
    {% if CURRENT_LOCATION or CURRENT_REGION or canAccess("locations:all") %}
      <div class="govuk-width-container">
        {{ mojOrganisationSwitcher({
          label: 'Location switcher',
          text: CURRENT_LOCATION.title or CURRENT_REGION.name or t("locations::all_locations"),
          link: {
            text: t("actions::switch_location"),
            href: '/locations'
          } if USER.locations.length > 1
        }) }}
      </div>
    {% endif %}
  {% endblock %}

  {% set breadcrumbs = getBreadcrumbs() %}
  {% if breadcrumbs|length > 1 %}
    <div class="govuk-width-container">
      {{ govukBreadcrumbs({
        items: breadcrumbs,
        attributes: {
          'data-auto-id': 'breadcrumbs'
        }
      }) }}
    </div>
  {% endif %}

  {% if REQUEST_PATH === '/' and whatsNewContent %}
    {{ appWhatsNewBanner(whatsNewContent) }}
  {% endif %}
{% endblock %}

{% block beforeContent %}
  {% if downtimeContent %}
    {{ appNotificationBanner(downtimeContent) }}
  {% endif %}
  {% include "includes/messages.njk" %}
{% endblock %}

{% block footer %}
  {% if FEEDBACK_URL %}
    {{ appFeedbackPrompt({
      content: {
        html: t("feedback_link", {
          url: FEEDBACK_URL
        })
      }
    }) }}
  {% endif %}

  {{ govukFooter({
    meta: {
      items: FOOTER_ITEMS
    }
  }) }}
{% endblock %}

{% block bodyEnd %}
    {% if DEVELOPMENT_TOOLS %}
      <div class="app-development-tools">
        <h2 class="app-development-tools__heading">
          Development tools
        </h2>

        <ul class="app-development-tools__items">
          {% for item in DEVELOPMENT_TOOLS.items %}
            <li class="app-development-tools__item">
              {% if item.href %}<a href="{{ item.href }}" id="{{item.id}}" data-module="{{ item.dataModule }}">{% endif %}
                {{ item.text }}
              {% if item.href %}</a>{% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

  <script type="module" src="{{ getAssetPath('app.js') }}" nonce="{{ cspNonce }}"></script>

  <!-- this makes the component work! -->
  {# <script type="module" nonce="{{ cspNonce }}">
        function t(t){if(t.includes("#"))return t.split("#").pop()}function e(t){const e=`--govuk-frontend-breakpoint-${t}`;return{property:e,value:window.getComputedStyle(document.documentElement).getPropertyValue(e)||void 0}}function o(t,e={}){var o;const n=t.getAttribute("tabindex");function i(){var o;null==(o=e.onBlur)||o.call(t),n||t.removeAttribute("tabindex")}n||t.setAttribute("tabindex","-1"),t.addEventListener("focus",(function(){t.addEventListener("blur",i,{once:!0})}),{once:!0}),null==(o=e.onBeforeFocus)||o.call(t),t.focus()}function n(t=document.body){return!!t&&t.classList.contains("govuk-frontend-supported")}function i(t){return!!t&&"object"==typeof t&&!function(t){return Array.isArray(t)}(t)}function s(t,e){return`${t.moduleName}: ${e}`}class r extends Error{constructor(...t){super(...t),this.name="GOVUKFrontendError"}}class a extends r{constructor(t=document.body){const e="noModule"in HTMLScriptElement.prototype?'GOV.UK Frontend initialised without `<body class="govuk-frontend-supported">` from template `<script>` snippet':"GOV.UK Frontend is not supported in this browser";super(t?e:'GOV.UK Frontend initialised without `<script type="module">`'),this.name="SupportError"}}class l extends r{constructor(...t){super(...t),this.name="ConfigError"}}class c extends r{constructor(t){let e="string"==typeof t?t:"";if("object"==typeof t){const{component:o,identifier:n,element:i,expectedType:r}=t;e=n,e+=i?` is not of type ${null!=r?r:"HTMLElement"}`:" not found",e=s(o,e)}super(e),this.name="ElementError"}}class u extends r{constructor(t){super("string"==typeof t?t:s(t,"Root element (`$root`) already initialised")),this.name="InitError"}}class h{get $root(){return this._$root}constructor(t){this._$root=void 0;const e=this.constructor;if("string"!=typeof e.moduleName)throw new u("`moduleName` not defined in component");if(!(t instanceof e.elementType))throw new c({element:t,component:e,identifier:"Root element (`$root`)",expectedType:e.elementType.name});this._$root=t,e.checkSupport(),this.checkInitialised();const o=e.moduleName;this.$root.setAttribute(`data-${o}-init`,"")}checkInitialised(){const t=this.constructor,e=t.moduleName;if(e&&function(t,e){return t instanceof HTMLElement&&t.hasAttribute(`data-${e}-init`)}(this.$root,e))throw new u(t)}static checkSupport(){if(!n())throw new a}}h.elementType=HTMLElement;const d=Symbol.for("configOverride");class p extends h{[d](t){return{}}get config(){return this._config}constructor(t,e){super(t),this._config=void 0;const o=this.constructor;if(void 0===o.defaults)throw new l(s(o,"Config passed as parameter into constructor but no defaults defined"));const n=function(t,e){if(void 0===t.schema)throw new l(s(t,"Config passed as parameter into constructor but no schema defined"));const o={};for(const[n,i]of Object.entries(t.schema.properties))n in e&&(o[n]=m(e[n],i)),"object"===(null==i?void 0:i.type)&&(o[n]=g(t.schema,e,n));return o}(o,this._$root.dataset);this._config=f(o.defaults,null!=e?e:{},this[d](n),n)}}function m(t,e){const o=t?t.trim():"";let n,i=null==e?void 0:e.type;switch(i||(["true","false"].includes(o)&&(i="boolean"),o.length>0&&isFinite(Number(o))&&(i="number")),i){case"boolean":n="true"===o;break;case"number":n=Number(o);break;default:n=t}return n}function f(...t){const e={};for(const o of t)for(const t of Object.keys(o)){const n=e[t],s=o[t];i(n)&&i(s)?e[t]=f(n,s):e[t]=s}return e}function g(t,e,o){const n=t.properties[o];if("object"!==(null==n?void 0:n.type))return;const s={[o]:{}};for(const[r,a]of Object.entries(e)){let t=s;const e=r.split(".");for(const[n,s]of e.entries())"object"==typeof t&&(n<e.length-1?(i(t[s])||(t[s]={}),t=t[s]):r!==o&&(t[s]=m(a)))}return s[o]}class b{constructor(t={},e={}){var o;this.translations=void 0,this.locale=void 0,this.translations=t,this.locale=null!=(o=e.locale)?o:document.documentElement.lang||"en"}t(t,e){if(!t)throw new Error("i18n: lookup key missing");let o=this.translations[t];if("number"==typeof(null==e?void 0:e.count)&&"object"==typeof o){const n=o[this.getPluralSuffix(t,e.count)];n&&(o=n)}if("string"==typeof o){if(o.match(/%{(.\S+)}/)){if(!e)throw new Error("i18n: cannot replace placeholders in string if no option data provided");return this.replacePlaceholders(o,e)}return o}return t}replacePlaceholders(t,e){const o=Intl.NumberFormat.supportedLocalesOf(this.locale).length?new Intl.NumberFormat(this.locale):void 0;return t.replace(/%{(.\S+)}/g,(function(t,n){if(Object.prototype.hasOwnProperty.call(e,n)){const t=e[n];return!1===t||"number"!=typeof t&&"string"!=typeof t?"":"number"==typeof t?o?o.format(t):`${t}`:t}throw new Error(`i18n: no data found to replace ${t} placeholder in string`)}))}hasIntlPluralRulesSupport(){return Boolean("PluralRules"in window.Intl&&Intl.PluralRules.supportedLocalesOf(this.locale).length)}getPluralSuffix(t,e){if(e=Number(e),!isFinite(e))return"other";const o=this.translations[t],n=this.hasIntlPluralRulesSupport()?new Intl.PluralRules(this.locale).select(e):this.selectPluralFormUsingFallbackRules(e);if("object"==typeof o){if(n in o)return n;if("other"in o)return console.warn(`i18n: Missing plural form ".${n}" for "${this.locale}" locale. Falling back to ".other".`),"other"}throw new Error(`i18n: Plural form ".other" is required for "${this.locale}" locale`)}selectPluralFormUsingFallbackRules(t){t=Math.abs(Math.floor(t));const e=this.getPluralRulesForLocale();return e?b.pluralRules[e](t):"other"}getPluralRulesForLocale(){const t=this.locale.split("-")[0];for(const e in b.pluralRulesMap){const o=b.pluralRulesMap[e];if(o.includes(this.locale)||o.includes(t))return e}}}b.pluralRulesMap={arabic:["ar"],chinese:["my","zh","id","ja","jv","ko","ms","th","vi"],french:["hy","bn","fr","gu","hi","fa","pa","zu"],german:["af","sq","az","eu","bg","ca","da","nl","en","et","fi","ka","de","el","hu","lb","no","so","sw","sv","ta","te","tr","ur"],irish:["ga"],russian:["ru","uk"],scottish:["gd"],spanish:["pt-PT","it","es"],welsh:["cy"]},b.pluralRules={arabic:t=>0===t?"zero":1===t?"one":2===t?"two":t%100>=3&&t%100<=10?"few":t%100>=11&&t%100<=99?"many":"other",chinese:()=>"other",french:t=>0===t||1===t?"one":"other",german:t=>1===t?"one":"other",irish:t=>1===t?"one":2===t?"two":t>=3&&t<=6?"few":t>=7&&t<=10?"many":"other",russian(t){const e=t%100,o=e%10;return 1===o&&11!==e?"one":o>=2&&o<=4&&!(e>=12&&e<=14)?"few":0===o||o>=5&&o<=9||e>=11&&e<=14?"many":"other"},scottish:t=>1===t||11===t?"one":2===t||12===t?"two":t>=3&&t<=10||t>=13&&t<=19?"few":"other",spanish:t=>1===t?"one":t%1e6==0&&0!==t?"many":"other",welsh:t=>0===t?"zero":1===t?"one":2===t?"two":3===t?"few":6===t?"many":"other"};class y extends p{constructor(t,e={}){super(t,e),this.i18n=void 0,this.controlsClass="govuk-accordion__controls",this.showAllClass="govuk-accordion__show-all",this.showAllTextClass="govuk-accordion__show-all-text",this.sectionClass="govuk-accordion__section",this.sectionExpandedClass="govuk-accordion__section--expanded",this.sectionButtonClass="govuk-accordion__section-button",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionHeadingDividerClass="govuk-accordion__section-heading-divider",this.sectionHeadingTextClass="govuk-accordion__section-heading-text",this.sectionHeadingTextFocusClass="govuk-accordion__section-heading-text-focus",this.sectionShowHideToggleClass="govuk-accordion__section-toggle",this.sectionShowHideToggleFocusClass="govuk-accordion__section-toggle-focus",this.sectionShowHideTextClass="govuk-accordion__section-toggle-text",this.upChevronIconClass="govuk-accordion-nav__chevron",this.downChevronIconClass="govuk-accordion-nav__chevron--down",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionSummaryFocusClass="govuk-accordion__section-summary-focus",this.sectionContentClass="govuk-accordion__section-content",this.$sections=void 0,this.$showAllButton=null,this.$showAllIcon=null,this.$showAllText=null,this.i18n=new b(this.config.i18n);const o=this.$root.querySelectorAll(`.${this.sectionClass}`);if(!o.length)throw new c({component:y,identifier:`Sections (\`<div class="${this.sectionClass}">\`)`});this.$sections=o,this.initControls(),this.initSectionHeaders(),this.updateShowAllButton(this.areAllSectionsOpen())}initControls(){this.$showAllButton=document.createElement("button"),this.$showAllButton.setAttribute("type","button"),this.$showAllButton.setAttribute("class",this.showAllClass),this.$showAllButton.setAttribute("aria-expanded","false"),this.$showAllIcon=document.createElement("span"),this.$showAllIcon.classList.add(this.upChevronIconClass),this.$showAllButton.appendChild(this.$showAllIcon);const t=document.createElement("div");t.setAttribute("class",this.controlsClass),t.appendChild(this.$showAllButton),this.$root.insertBefore(t,this.$root.firstChild),this.$showAllText=document.createElement("span"),this.$showAllText.classList.add(this.showAllTextClass),this.$showAllButton.appendChild(this.$showAllText),this.$showAllButton.addEventListener("click",(()=>this.onShowOrHideAllToggle())),"onbeforematch"in document&&document.addEventListener("beforematch",(t=>this.onBeforeMatch(t)))}initSectionHeaders(){this.$sections.forEach(((t,e)=>{const o=t.querySelector(`.${this.sectionHeaderClass}`);if(!o)throw new c({component:y,identifier:`Section headers (\`<div class="${this.sectionHeaderClass}">\`)`});this.constructHeaderMarkup(o,e),this.setExpanded(this.isExpanded(t),t),o.addEventListener("click",(()=>this.onSectionToggle(t))),this.setInitialState(t)}))}constructHeaderMarkup(t,e){const o=t.querySelector(`.${this.sectionButtonClass}`),n=t.querySelector(`.${this.sectionHeadingClass}`),i=t.querySelector(`.${this.sectionSummaryClass}`);if(!n)throw new c({component:y,identifier:`Section heading (\`.${this.sectionHeadingClass}\`)`});if(!o)throw new c({component:y,identifier:`Section button placeholder (\`<span class="${this.sectionButtonClass}">\`)`});const s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("aria-controls",`${this.$root.id}-content-${e+1}`);for(const c of Array.from(o.attributes))"id"!==c.name&&s.setAttribute(c.name,c.value);const r=document.createElement("span");r.classList.add(this.sectionHeadingTextClass),r.id=o.id;const a=document.createElement("span");a.classList.add(this.sectionHeadingTextFocusClass),r.appendChild(a),Array.from(o.childNodes).forEach((t=>a.appendChild(t)));const l=document.createElement("span");l.classList.add(this.sectionShowHideToggleClass),l.setAttribute("data-nosnippet","");const u=document.createElement("span");u.classList.add(this.sectionShowHideToggleFocusClass),l.appendChild(u);const h=document.createElement("span"),d=document.createElement("span");if(d.classList.add(this.upChevronIconClass),u.appendChild(d),h.classList.add(this.sectionShowHideTextClass),u.appendChild(h),s.appendChild(r),s.appendChild(this.getButtonPunctuationEl()),i){const t=document.createElement("span"),e=document.createElement("span");e.classList.add(this.sectionSummaryFocusClass),t.appendChild(e);for(const o of Array.from(i.attributes))t.setAttribute(o.name,o.value);Array.from(i.childNodes).forEach((t=>e.appendChild(t))),i.remove(),s.appendChild(t),s.appendChild(this.getButtonPunctuationEl())}s.appendChild(l),n.removeChild(o),n.appendChild(s)}onBeforeMatch(t){const e=t.target;if(!(e instanceof Element))return;const o=e.closest(`.${this.sectionClass}`);o&&this.setExpanded(!0,o)}onSectionToggle(t){const e=!this.isExpanded(t);this.setExpanded(e,t),this.storeState(t,e)}onShowOrHideAllToggle(){const t=!this.areAllSectionsOpen();this.$sections.forEach((e=>{this.setExpanded(t,e),this.storeState(e,t)})),this.updateShowAllButton(t)}setExpanded(t,e){const o=e.querySelector(`.${this.upChevronIconClass}`),n=e.querySelector(`.${this.sectionShowHideTextClass}`),i=e.querySelector(`.${this.sectionButtonClass}`),s=e.querySelector(`.${this.sectionContentClass}`);if(!s)throw new c({component:y,identifier:`Section content (\`<div class="${this.sectionContentClass}">\`)`});if(!o||!n||!i)return;const r=t?this.i18n.t("hideSection"):this.i18n.t("showSection");n.textContent=r,i.setAttribute("aria-expanded",`${t}`);const a=[],l=e.querySelector(`.${this.sectionHeadingTextClass}`);l&&a.push(`${l.textContent}`.trim());const u=e.querySelector(`.${this.sectionSummaryClass}`);u&&a.push(`${u.textContent}`.trim());const h=t?this.i18n.t("hideSectionAriaLabel"):this.i18n.t("showSectionAriaLabel");a.push(h),i.setAttribute("aria-label",a.join(" , ")),t?(s.removeAttribute("hidden"),e.classList.add(this.sectionExpandedClass),o.classList.remove(this.downChevronIconClass)):(s.setAttribute("hidden","until-found"),e.classList.remove(this.sectionExpandedClass),o.classList.add(this.downChevronIconClass)),this.updateShowAllButton(this.areAllSectionsOpen())}isExpanded(t){return t.classList.contains(this.sectionExpandedClass)}areAllSectionsOpen(){return Array.from(this.$sections).every((t=>this.isExpanded(t)))}updateShowAllButton(t){this.$showAllButton&&this.$showAllText&&this.$showAllIcon&&(this.$showAllButton.setAttribute("aria-expanded",t.toString()),this.$showAllText.textContent=t?this.i18n.t("hideAllSections"):this.i18n.t("showAllSections"),this.$showAllIcon.classList.toggle(this.downChevronIconClass,!t))}getIdentifier(t){const e=t.querySelector(`.${this.sectionButtonClass}`);return null==e?void 0:e.getAttribute("aria-controls")}storeState(t,e){if(!this.config.rememberExpanded)return;const o=this.getIdentifier(t);if(o)try{window.sessionStorage.setItem(o,e.toString())}catch(n){}}setInitialState(t){if(!this.config.rememberExpanded)return;const e=this.getIdentifier(t);if(e)try{const o=window.sessionStorage.getItem(e);null!==o&&this.setExpanded("true"===o,t)}catch(o){}}getButtonPunctuationEl(){const t=document.createElement("span");return t.classList.add("govuk-visually-hidden",this.sectionHeadingDividerClass),t.textContent=", ",t}}y.moduleName="govuk-accordion",y.defaults=Object.freeze({i18n:{hideAllSections:"Hide all sections",hideSection:"Hide",hideSectionAriaLabel:"Hide this section",showAllSections:"Show all sections",showSection:"Show",showSectionAriaLabel:"Show this section"},rememberExpanded:!0}),y.schema=Object.freeze({properties:{i18n:{type:"object"},rememberExpanded:{type:"boolean"}}});class v extends p{constructor(t,e={}){super(t,e),this.debounceFormSubmitTimer=null,this.$root.addEventListener("keydown",(t=>this.handleKeyDown(t))),this.$root.addEventListener("click",(t=>this.debounce(t)))}handleKeyDown(t){const e=t.target;" "===t.key&&e instanceof HTMLElement&&"button"===e.getAttribute("role")&&(t.preventDefault(),e.click())}debounce(t){if(this.config.preventDoubleClick)return this.debounceFormSubmitTimer?(t.preventDefault(),!1):void(this.debounceFormSubmitTimer=window.setTimeout((()=>{this.debounceFormSubmitTimer=null}),1e3))}}function w(t,e){const o=t.closest(`[${e}]`);return o?o.getAttribute(e):null}v.moduleName="govuk-button",v.defaults=Object.freeze({preventDoubleClick:!1}),v.schema=Object.freeze({properties:{preventDoubleClick:{type:"boolean"}}});class k extends p{[d](t){let e={};return("maxwords"in t||"maxlength"in t)&&(e={maxlength:void 0,maxwords:void 0}),e}constructor(t,e={}){var o,n;super(t,e),this.$textarea=void 0,this.$visibleCountMessage=void 0,this.$screenReaderCountMessage=void 0,this.lastInputTimestamp=null,this.lastInputValue="",this.valueChecker=null,this.i18n=void 0,this.maxLength=void 0;const i=this.$root.querySelector(".govuk-js-character-count");if(!(i instanceof HTMLTextAreaElement||i instanceof HTMLInputElement))throw new c({component:k,element:i,expectedType:"HTMLTextareaElement or HTMLInputElement",identifier:"Form field (`.govuk-js-character-count`)"});const r=function(t,e){const o=[];for(const[n,i]of Object.entries(t)){const t=[];if(Array.isArray(i)){for(const{required:o,errorMessage:n}of i)o.every((t=>!!e[t]))||t.push(n);"anyOf"!==n||i.length-t.length>=1||o.push(...t)}}return o}(k.schema,this.config);if(r[0])throw new l(s(k,r[0]));this.i18n=new b(this.config.i18n,{locale:w(this.$root,"lang")}),this.maxLength=null!=(o=null!=(n=this.config.maxwords)?n:this.config.maxlength)?o:1/0,this.$textarea=i;const a=`${this.$textarea.id}-info`,u=document.getElementById(a);if(!u)throw new c({component:k,element:u,identifier:`Count message (\`id="${a}"\`)`});`${u.textContent}`.match(/^\s*$/)&&(u.textContent=this.i18n.t("textareaDescription",{count:this.maxLength})),this.$textarea.insertAdjacentElement("afterend",u);const h=document.createElement("div");h.className="govuk-character-count__sr-status govuk-visually-hidden",h.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=h,u.insertAdjacentElement("afterend",h);const d=document.createElement("div");d.className=u.className,d.classList.add("govuk-character-count__status"),d.setAttribute("aria-hidden","true"),this.$visibleCountMessage=d,u.insertAdjacentElement("afterend",d),u.classList.add("govuk-visually-hidden"),this.$textarea.removeAttribute("maxlength"),this.bindChangeEvents(),window.addEventListener("pageshow",(()=>this.updateCountMessage())),this.updateCountMessage()}bindChangeEvents(){this.$textarea.addEventListener("keyup",(()=>this.handleKeyUp())),this.$textarea.addEventListener("focus",(()=>this.handleFocus())),this.$textarea.addEventListener("blur",(()=>this.handleBlur()))}handleKeyUp(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()}handleFocus(){this.valueChecker=window.setInterval((()=>{(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.updateIfValueChanged()}),1e3)}handleBlur(){this.valueChecker&&window.clearInterval(this.valueChecker)}updateIfValueChanged(){this.$textarea.value!==this.lastInputValue&&(this.lastInputValue=this.$textarea.value,this.updateCountMessage())}updateCountMessage(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()}updateVisibleCountMessage(){const t=this.maxLength-this.count(this.$textarea.value)<0;this.$visibleCountMessage.classList.toggle("govuk-character-count__message--disabled",!this.isOverThreshold()),this.$textarea.classList.toggle("govuk-textarea--error",t),this.$visibleCountMessage.classList.toggle("govuk-error-message",t),this.$visibleCountMessage.classList.toggle("govuk-hint",!t),this.$visibleCountMessage.textContent=this.getCountMessage()}updateScreenReaderCountMessage(){this.isOverThreshold()?this.$screenReaderCountMessage.removeAttribute("aria-hidden"):this.$screenReaderCountMessage.setAttribute("aria-hidden","true"),this.$screenReaderCountMessage.textContent=this.getCountMessage()}count(t){if(this.config.maxwords){var e;return(null!=(e=t.match(/\S+/g))?e:[]).length}return t.length}getCountMessage(){const t=this.maxLength-this.count(this.$textarea.value),e=this.config.maxwords?"words":"characters";return this.formatCountMessage(t,e)}formatCountMessage(t,e){if(0===t)return this.i18n.t(`${e}AtLimit`);const o=t<0?"OverLimit":"UnderLimit";return this.i18n.t(`${e}${o}`,{count:Math.abs(t)})}isOverThreshold(){if(!this.config.threshold)return!0;const t=this.count(this.$textarea.value);return this.maxLength*this.config.threshold/100<=t}}k.moduleName="govuk-character-count",k.defaults=Object.freeze({threshold:0,i18n:{charactersUnderLimit:{one:"You have %{count} character remaining",other:"You have %{count} characters remaining"},charactersAtLimit:"You have 0 characters remaining",charactersOverLimit:{one:"You have %{count} character too many",other:"You have %{count} characters too many"},wordsUnderLimit:{one:"You have %{count} word remaining",other:"You have %{count} words remaining"},wordsAtLimit:"You have 0 words remaining",wordsOverLimit:{one:"You have %{count} word too many",other:"You have %{count} words too many"},textareaDescription:{other:""}}}),k.schema=Object.freeze({properties:{i18n:{type:"object"},maxwords:{type:"number"},maxlength:{type:"number"},threshold:{type:"number"}},anyOf:[{required:["maxwords"],errorMessage:'Either "maxlength" or "maxwords" must be provided'},{required:["maxlength"],errorMessage:'Either "maxlength" or "maxwords" must be provided'}]});class x extends h{constructor(t){super(t),this.$inputs=void 0;const e=this.$root.querySelectorAll('input[type="checkbox"]');if(!e.length)throw new c({component:x,identifier:'Form inputs (`<input type="checkbox">`)'});this.$inputs=e,this.$inputs.forEach((t=>{const e=t.getAttribute("data-aria-controls");if(e){if(!document.getElementById(e))throw new c({component:x,identifier:`Conditional reveal (\`id="${e}"\`)`});t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls")}})),window.addEventListener("pageshow",(()=>this.syncAllConditionalReveals())),this.syncAllConditionalReveals(),this.$root.addEventListener("click",(t=>this.handleClick(t)))}syncAllConditionalReveals(){this.$inputs.forEach((t=>this.syncConditionalRevealWithInputState(t)))}syncConditionalRevealWithInputState(t){const e=t.getAttribute("aria-controls");if(!e)return;const o=document.getElementById(e);if(null!=o&&o.classList.contains("govuk-checkboxes__conditional")){const e=t.checked;t.setAttribute("aria-expanded",e.toString()),o.classList.toggle("govuk-checkboxes__conditional--hidden",!e)}}unCheckAllInputsExcept(t){document.querySelectorAll(`input[type="checkbox"][name="${t.name}"]`).forEach((e=>{t.form===e.form&&e!==t&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}))}unCheckExclusiveInputs(t){document.querySelectorAll(`input[data-behaviour="exclusive"][type="checkbox"][name="${t.name}"]`).forEach((e=>{t.form===e.form&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}))}handleClick(t){const e=t.target;if(!(e instanceof HTMLInputElement)||"checkbox"!==e.type)return;if(e.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(e),!e.checked)return;"exclusive"===e.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(e):this.unCheckExclusiveInputs(e)}}x.moduleName="govuk-checkboxes";class C extends p{constructor(t,e={}){super(t,e),this.config.disableAutoFocus||o(this.$root),this.$root.addEventListener("click",(t=>this.handleClick(t)))}handleClick(t){const e=t.target;e&&this.focusTarget(e)&&t.preventDefault()}focusTarget(e){if(!(e instanceof HTMLAnchorElement))return!1;const o=t(e.href);if(!o)return!1;const n=document.getElementById(o);if(!n)return!1;const i=this.getAssociatedLegendOrLabel(n);return!!i&&(i.scrollIntoView(),n.focus({preventScroll:!0}),!0)}getAssociatedLegendOrLabel(t){var e;const o=t.closest("fieldset");if(o){const e=o.getElementsByTagName("legend");if(e.length){const o=e[0];if(t instanceof HTMLInputElement&&("checkbox"===t.type||"radio"===t.type))return o;const n=o.getBoundingClientRect().top,i=t.getBoundingClientRect();if(i.height&&window.innerHeight){if(i.top+i.height-n<window.innerHeight/2)return o}}}return null!=(e=document.querySelector(`label[for='${t.getAttribute("id")}']`))?e:t.closest("label")}}C.moduleName="govuk-error-summary",C.defaults=Object.freeze({disableAutoFocus:!1}),C.schema=Object.freeze({properties:{disableAutoFocus:{type:"boolean"}}});class T extends p{constructor(t,e={}){super(t,e),this.i18n=void 0,this.$button=void 0,this.$skiplinkButton=null,this.$updateSpan=null,this.$indicatorContainer=null,this.$overlay=null,this.keypressCounter=0,this.lastKeyWasModified=!1,this.timeoutTime=5e3,this.keypressTimeoutId=null,this.timeoutMessageId=null;const o=this.$root.querySelector(".govuk-exit-this-page__button");if(!(o instanceof HTMLAnchorElement))throw new c({component:T,element:o,expectedType:"HTMLAnchorElement",identifier:"Button (`.govuk-exit-this-page__button`)"});this.i18n=new b(this.config.i18n),this.$button=o;const n=document.querySelector(".govuk-js-exit-this-page-skiplink");n instanceof HTMLAnchorElement&&(this.$skiplinkButton=n),this.buildIndicator(),this.initUpdateSpan(),this.initButtonClickHandler(),"govukFrontendExitThisPageKeypress"in document.body.dataset||(document.addEventListener("keyup",this.handleKeypress.bind(this),!0),document.body.dataset.govukFrontendExitThisPageKeypress="true"),window.addEventListener("pageshow",this.resetPage.bind(this))}initUpdateSpan(){this.$updateSpan=document.createElement("span"),this.$updateSpan.setAttribute("role","status"),this.$updateSpan.className="govuk-visually-hidden",this.$root.appendChild(this.$updateSpan)}initButtonClickHandler(){this.$button.addEventListener("click",this.handleClick.bind(this)),this.$skiplinkButton&&this.$skiplinkButton.addEventListener("click",this.handleClick.bind(this))}buildIndicator(){this.$indicatorContainer=document.createElement("div"),this.$indicatorContainer.className="govuk-exit-this-page__indicator",this.$indicatorContainer.setAttribute("aria-hidden","true");for(let t=0;t<3;t++){const t=document.createElement("div");t.className="govuk-exit-this-page__indicator-light",this.$indicatorContainer.appendChild(t)}this.$button.appendChild(this.$indicatorContainer)}updateIndicator(){if(!this.$indicatorContainer)return;this.$indicatorContainer.classList.toggle("govuk-exit-this-page__indicator--visible",this.keypressCounter>0);this.$indicatorContainer.querySelectorAll(".govuk-exit-this-page__indicator-light").forEach(((t,e)=>{t.classList.toggle("govuk-exit-this-page__indicator-light--on",e<this.keypressCounter)}))}exitPage(){this.$updateSpan&&(this.$updateSpan.textContent="",document.body.classList.add("govuk-exit-this-page-hide-content"),this.$overlay=document.createElement("div"),this.$overlay.className="govuk-exit-this-page-overlay",this.$overlay.setAttribute("role","alert"),document.body.appendChild(this.$overlay),this.$overlay.textContent=this.i18n.t("activated"),window.location.href=this.$button.href)}handleClick(t){t.preventDefault(),this.exitPage()}handleKeypress(t){this.$updateSpan&&("Shift"!==t.key||this.lastKeyWasModified?this.keypressTimeoutId&&this.resetKeypressTimer():(this.keypressCounter+=1,this.updateIndicator(),this.timeoutMessageId&&(window.clearTimeout(this.timeoutMessageId),this.timeoutMessageId=null),this.keypressCounter>=3?(this.keypressCounter=0,this.keypressTimeoutId&&(window.clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=null),this.exitPage()):1===this.keypressCounter?this.$updateSpan.textContent=this.i18n.t("pressTwoMoreTimes"):this.$updateSpan.textContent=this.i18n.t("pressOneMoreTime"),this.setKeypressTimer()),this.lastKeyWasModified=t.shiftKey)}setKeypressTimer(){this.keypressTimeoutId&&window.clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=window.setTimeout(this.resetKeypressTimer.bind(this),this.timeoutTime)}resetKeypressTimer(){if(!this.$updateSpan)return;this.keypressTimeoutId&&(window.clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=null);const t=this.$updateSpan;this.keypressCounter=0,t.textContent=this.i18n.t("timedOut"),this.timeoutMessageId=window.setTimeout((()=>{t.textContent=""}),this.timeoutTime),this.updateIndicator()}resetPage(){document.body.classList.remove("govuk-exit-this-page-hide-content"),this.$overlay&&(this.$overlay.remove(),this.$overlay=null),this.$updateSpan&&(this.$updateSpan.setAttribute("role","status"),this.$updateSpan.textContent=""),this.updateIndicator(),this.keypressTimeoutId&&window.clearTimeout(this.keypressTimeoutId),this.timeoutMessageId&&window.clearTimeout(this.timeoutMessageId)}}T.moduleName="govuk-exit-this-page",T.defaults=Object.freeze({i18n:{activated:"Loading.",timedOut:"Exit this page expired.",pressTwoMoreTimes:"Shift, press 2 more times to exit.",pressOneMoreTime:"Shift, press 1 more time to exit."}}),T.schema=Object.freeze({properties:{i18n:{type:"object"}}});class L extends h{constructor(t){super(t),this.$menuButton=void 0,this.$menu=void 0,this.menuIsOpen=!1,this.mql=null;const e=this.$root.querySelector(".govuk-js-header-toggle");if(!e)return this;const o=e.getAttribute("aria-controls");if(!o)throw new c({component:L,identifier:'Navigation button (`<button class="govuk-js-header-toggle">`) attribute (`aria-controls`)'});const n=document.getElementById(o);if(!n)throw new c({component:L,element:n,identifier:`Navigation (\`<ul id="${o}">\`)`});this.$menu=n,this.$menuButton=e,this.setupResponsiveChecks(),this.$menuButton.addEventListener("click",(()=>this.handleMenuButtonClick()))}setupResponsiveChecks(){const t=e("desktop");if(!t.value)throw new c({component:L,identifier:`CSS custom property (\`${t.property}\`) on pseudo-class \`:root\``});this.mql=window.matchMedia(`(min-width: ${t.value})`),"addEventListener"in this.mql?this.mql.addEventListener("change",(()=>this.checkMode())):this.mql.addListener((()=>this.checkMode())),this.checkMode()}checkMode(){this.mql&&this.$menu&&this.$menuButton&&(this.mql.matches?(this.$menu.removeAttribute("hidden"),this.$menuButton.setAttribute("hidden","")):(this.$menuButton.removeAttribute("hidden"),this.$menuButton.setAttribute("aria-expanded",this.menuIsOpen.toString()),this.menuIsOpen?this.$menu.removeAttribute("hidden"):this.$menu.setAttribute("hidden","")))}handleMenuButtonClick(){this.menuIsOpen=!this.menuIsOpen,this.checkMode()}}L.moduleName="govuk-header";class _ extends p{constructor(t,e={}){super(t,e),"alert"!==this.$root.getAttribute("role")||this.config.disableAutoFocus||o(this.$root)}}_.moduleName="govuk-notification-banner",_.defaults=Object.freeze({disableAutoFocus:!1}),_.schema=Object.freeze({properties:{disableAutoFocus:{type:"boolean"}}});class S extends p{constructor(t,e={}){super(t,e),this.i18n=void 0,this.$input=void 0,this.$showHideButton=void 0,this.$screenReaderStatusMessage=void 0;const o=this.$root.querySelector(".govuk-js-password-input-input");if(!(o instanceof HTMLInputElement))throw new c({component:S,element:o,expectedType:"HTMLInputElement",identifier:"Form field (`.govuk-js-password-input-input`)"});if("password"!==o.type)throw new c("Password input: Form field (`.govuk-js-password-input-input`) must be of type `password`.");const n=this.$root.querySelector(".govuk-js-password-input-toggle");if(!(n instanceof HTMLButtonElement))throw new c({component:S,element:n,expectedType:"HTMLButtonElement",identifier:"Button (`.govuk-js-password-input-toggle`)"});if("button"!==n.type)throw new c("Password input: Button (`.govuk-js-password-input-toggle`) must be of type `button`.");this.$input=o,this.$showHideButton=n,this.i18n=new b(this.config.i18n,{locale:w(this.$root,"lang")}),this.$showHideButton.removeAttribute("hidden");const i=document.createElement("div");i.className="govuk-password-input__sr-status govuk-visually-hidden",i.setAttribute("aria-live","polite"),this.$screenReaderStatusMessage=i,this.$input.insertAdjacentElement("afterend",i),this.$showHideButton.addEventListener("click",this.toggle.bind(this)),this.$input.form&&this.$input.form.addEventListener("submit",(()=>this.hide())),window.addEventListener("pageshow",(t=>{t.persisted&&"password"!==this.$input.type&&this.hide()})),this.hide()}toggle(t){t.preventDefault(),"password"!==this.$input.type?this.hide():this.show()}show(){this.setType("text")}hide(){this.setType("password")}setType(t){if(t===this.$input.type)return;this.$input.setAttribute("type",t);const e="password"===t,o=e?"show":"hide",n=e?"passwordHidden":"passwordShown";this.$showHideButton.innerText=this.i18n.t(`${o}Password`),this.$showHideButton.setAttribute("aria-label",this.i18n.t(`${o}PasswordAriaLabel`)),this.$screenReaderStatusMessage.innerText=this.i18n.t(`${n}Announcement`)}}S.moduleName="govuk-password-input",S.defaults=Object.freeze({i18n:{showPassword:"Show",hidePassword:"Hide",showPasswordAriaLabel:"Show password",hidePasswordAriaLabel:"Hide password",passwordShownAnnouncement:"Your password is visible",passwordHiddenAnnouncement:"Your password is hidden"}}),S.schema=Object.freeze({properties:{i18n:{type:"object"}}});class A extends h{constructor(t){super(t),this.$inputs=void 0;const e=this.$root.querySelectorAll('input[type="radio"]');if(!e.length)throw new c({component:A,identifier:'Form inputs (`<input type="radio">`)'});this.$inputs=e,this.$inputs.forEach((t=>{const e=t.getAttribute("data-aria-controls");if(e){if(!document.getElementById(e))throw new c({component:A,identifier:`Conditional reveal (\`id="${e}"\`)`});t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls")}})),window.addEventListener("pageshow",(()=>this.syncAllConditionalReveals())),this.syncAllConditionalReveals(),this.$root.addEventListener("click",(t=>this.handleClick(t)))}syncAllConditionalReveals(){this.$inputs.forEach((t=>this.syncConditionalRevealWithInputState(t)))}syncConditionalRevealWithInputState(t){const e=t.getAttribute("aria-controls");if(!e)return;const o=document.getElementById(e);if(null!=o&&o.classList.contains("govuk-radios__conditional")){const e=t.checked;t.setAttribute("aria-expanded",e.toString()),o.classList.toggle("govuk-radios__conditional--hidden",!e)}}handleClick(t){const e=t.target;if(!(e instanceof HTMLInputElement)||"radio"!==e.type)return;const o=document.querySelectorAll('input[type="radio"][aria-controls]'),n=e.form,i=e.name;o.forEach((t=>{const e=t.form===n;t.name===i&&e&&this.syncConditionalRevealWithInputState(t)}))}}A.moduleName="govuk-radios";class E extends h{constructor(t){super(t),this.$menuButton=void 0,this.$menu=void 0,this.menuIsOpen=!1,this.mql=null;const e=this.$root.querySelector(".govuk-js-service-navigation-toggle");if(!e)return this;const o=e.getAttribute("aria-controls");if(!o)throw new c({component:E,identifier:'Navigation button (`<button class="govuk-js-service-navigation-toggle">`) attribute (`aria-controls`)'});const n=document.getElementById(o);if(!n)throw new c({component:E,element:n,identifier:`Navigation (\`<ul id="${o}">\`)`});this.$menu=n,this.$menuButton=e,this.setupResponsiveChecks(),this.$menuButton.addEventListener("click",(()=>this.handleMenuButtonClick()))}setupResponsiveChecks(){const t=e("tablet");if(!t.value)throw new c({component:E,identifier:`CSS custom property (\`${t.property}\`) on pseudo-class \`:root\``});this.mql=window.matchMedia(`(min-width: ${t.value})`),"addEventListener"in this.mql?this.mql.addEventListener("change",(()=>this.checkMode())):this.mql.addListener((()=>this.checkMode())),this.checkMode()}checkMode(){this.mql&&this.$menu&&this.$menuButton&&(this.mql.matches?(this.$menu.removeAttribute("hidden"),this.$menuButton.setAttribute("hidden","")):(this.$menuButton.removeAttribute("hidden"),this.$menuButton.setAttribute("aria-expanded",this.menuIsOpen.toString()),this.menuIsOpen?this.$menu.removeAttribute("hidden"):this.$menu.setAttribute("hidden","")))}handleMenuButtonClick(){this.menuIsOpen=!this.menuIsOpen,this.checkMode()}}E.moduleName="govuk-service-navigation";class D extends h{constructor(e){var n;super(e);const i=this.$root.hash,s=null!=(n=this.$root.getAttribute("href"))?n:"";let r;try{r=new window.URL(this.$root.href)}catch(u){throw new c(`Skip link: Target link (\`href="${s}"\`) is invalid`)}if(r.origin!==window.location.origin||r.pathname!==window.location.pathname)return;const a=t(i);if(!a)throw new c(`Skip link: Target link (\`href="${s}"\`) has no hash fragment`);const l=document.getElementById(a);if(!l)throw new c({component:D,element:l,identifier:`Target content (\`id="${a}"\`)`});this.$root.addEventListener("click",(()=>o(l,{onBeforeFocus(){l.classList.add("govuk-skip-link-focused-element")},onBlur(){l.classList.remove("govuk-skip-link-focused-element")}})))}}D.elementType=HTMLAnchorElement,D.moduleName="govuk-skip-link";let j=class o extends h{constructor(t){super(t),this.$tabs=void 0,this.$tabList=void 0,this.$tabListItems=void 0,this.jsHiddenClass="govuk-tabs__panel--hidden",this.changingHash=!1,this.boundTabClick=void 0,this.boundTabKeydown=void 0,this.boundOnHashChange=void 0,this.mql=null;const e=this.$root.querySelectorAll("a.govuk-tabs__tab");if(!e.length)throw new c({component:o,identifier:'Links (`<a class="govuk-tabs__tab">`)'});this.$tabs=e,this.boundTabClick=this.onTabClick.bind(this),this.boundTabKeydown=this.onTabKeydown.bind(this),this.boundOnHashChange=this.onHashChange.bind(this);const n=this.$root.querySelector(".govuk-tabs__list"),i=this.$root.querySelectorAll("li.govuk-tabs__list-item");if(!n)throw new c({component:o,identifier:'List (`<ul class="govuk-tabs__list">`)'});if(!i.length)throw new c({component:o,identifier:'List items (`<li class="govuk-tabs__list-item">`)'});this.$tabList=n,this.$tabListItems=i,this.setupResponsiveChecks()}setupResponsiveChecks(){const t=e("tablet");if(!t.value)throw new c({component:o,identifier:`CSS custom property (\`${t.property}\`) on pseudo-class \`:root\``});this.mql=window.matchMedia(`(min-width: ${t.value})`),"addEventListener"in this.mql?this.mql.addEventListener("change",(()=>this.checkMode())):this.mql.addListener((()=>this.checkMode())),this.checkMode()}checkMode(){var t;null!=(t=this.mql)&&t.matches?this.setup():this.teardown()}setup(){var t;this.$tabList.setAttribute("role","tablist"),this.$tabListItems.forEach((t=>{t.setAttribute("role","presentation")})),this.$tabs.forEach((t=>{this.setAttributes(t),t.addEventListener("click",this.boundTabClick,!0),t.addEventListener("keydown",this.boundTabKeydown,!0),this.hideTab(t)}));const e=null!=(t=this.getTab(window.location.hash))?t:this.$tabs[0];this.showTab(e),window.addEventListener("hashchange",this.boundOnHashChange,!0)}teardown(){this.$tabList.removeAttribute("role"),this.$tabListItems.forEach((t=>{t.removeAttribute("role")})),this.$tabs.forEach((t=>{t.removeEventListener("click",this.boundTabClick,!0),t.removeEventListener("keydown",this.boundTabKeydown,!0),this.unsetAttributes(t)})),window.removeEventListener("hashchange",this.boundOnHashChange,!0)}onHashChange(){const t=window.location.hash,e=this.getTab(t);if(!e)return;if(this.changingHash)return void(this.changingHash=!1);const o=this.getCurrentTab();o&&(this.hideTab(o),this.showTab(e),e.focus())}hideTab(t){this.unhighlightTab(t),this.hidePanel(t)}showTab(t){this.highlightTab(t),this.showPanel(t)}getTab(t){return this.$root.querySelector(`a.govuk-tabs__tab[href="${t}"]`)}setAttributes(e){const o=t(e.href);if(!o)return;e.setAttribute("id",`tab_${o}`),e.setAttribute("role","tab"),e.setAttribute("aria-controls",o),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");const n=this.getPanel(e);n&&(n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",e.id),n.classList.add(this.jsHiddenClass))}unsetAttributes(t){t.removeAttribute("id"),t.removeAttribute("role"),t.removeAttribute("aria-controls"),t.removeAttribute("aria-selected"),t.removeAttribute("tabindex");const e=this.getPanel(t);e&&(e.removeAttribute("role"),e.removeAttribute("aria-labelledby"),e.classList.remove(this.jsHiddenClass))}onTabClick(t){const e=this.getCurrentTab(),o=t.currentTarget;e&&o instanceof HTMLAnchorElement&&(t.preventDefault(),this.hideTab(e),this.showTab(o),this.createHistoryEntry(o))}createHistoryEntry(t){const e=this.getPanel(t);if(!e)return;const o=e.id;e.id="",this.changingHash=!0,window.location.hash=o,e.id=o}onTabKeydown(t){switch(t.key){case"ArrowLeft":case"Left":this.activatePreviousTab(),t.preventDefault();break;case"ArrowRight":case"Right":this.activateNextTab(),t.preventDefault()}}activateNextTab(){const t=this.getCurrentTab();if(null==t||!t.parentElement)return;const e=t.parentElement.nextElementSibling;if(!e)return;const o=e.querySelector("a.govuk-tabs__tab");o&&(this.hideTab(t),this.showTab(o),o.focus(),this.createHistoryEntry(o))}activatePreviousTab(){const t=this.getCurrentTab();if(null==t||!t.parentElement)return;const e=t.parentElement.previousElementSibling;if(!e)return;const o=e.querySelector("a.govuk-tabs__tab");o&&(this.hideTab(t),this.showTab(o),o.focus(),this.createHistoryEntry(o))}getPanel(e){const o=t(e.href);return o?this.$root.querySelector(`#${o}`):null}showPanel(t){const e=this.getPanel(t);e&&e.classList.remove(this.jsHiddenClass)}hidePanel(t){const e=this.getPanel(t);e&&e.classList.add(this.jsHiddenClass)}unhighlightTab(t){t.parentElement&&(t.setAttribute("aria-selected","false"),t.parentElement.classList.remove("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","-1"))}highlightTab(t){t.parentElement&&(t.setAttribute("aria-selected","true"),t.parentElement.classList.add("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","0"))}getCurrentTab(){return this.$root.querySelector(".govuk-tabs__list-item--selected a.govuk-tabs__tab")}};function M(t){this.container=$(t),this.container.data("moj-add-another-initialised")||(this.container.data("moj-add-another-initialised",!0),this.container.on("click",".moj-add-another__remove-button",$.proxy(this,"onRemoveButtonClick")),this.container.on("click",".moj-add-another__add-button",$.proxy(this,"onAddButtonClick")),this.container.find(".moj-add-another__add-button, moj-add-another__remove-button").prop("type","button"))}function B(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(let o=0;o<t.length;o++)e.call(window,t[o],o,t)}function I(t,e={}){const o=t.getAttribute("tabindex");function n(){e.onBlur&&e.onBlur.call(t),o||t.removeAttribute("tabindex")}o||t.setAttribute("tabindex","-1"),t.addEventListener("focus",(function(){t.addEventListener("blur",n,{once:!0})}),{once:!0}),e.onBeforeFocus&&e.onBeforeFocus.call(t),t.focus()}function H(t,e={}){if(!t)return this;const o=Object.freeze({properties:{dismissible:{type:"boolean"},dismissText:{type:"string"},disableAutoFocus:{type:"boolean"},focusOnDismissSelector:{type:"string"}}});this.config=this.mergeConfigs({dismissible:!1,dismissText:"Dismiss",disableAutoFocus:!1},e,this.parseDataset(o,t.dataset)),this.$module=t}function O(t,e={}){if(!t)return this;const o=Object.freeze({properties:{buttonText:{type:"string"},buttonClasses:{type:"string"},alignMenu:{type:"string"}}});this.config=this.mergeConfigs({buttonText:"Actions",alignMenu:"left",buttonClasses:""},e,this.parseDataset(o,t.dataset)),this.$module=t}function q(t,e={}){if(!t)return this;const o=Object.freeze({properties:{excludedDates:{type:"string"},excludedDays:{type:"string"},leadingZeros:{type:"string"},maxDate:{type:"string"},minDate:{type:"string"},weekStartDay:{type:"string"}}});this.config=this.mergeConfigs({leadingZeros:!1,weekStartDay:"monday"},e,this.parseDataset(o,t.dataset)),this.dayLabels=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],this.monthLabels=["January","February","March","April","May","June","July","August","September","October","November","December"],this.currentDate=new Date,this.currentDate.setHours(0,0,0,0),this.calendarDays=[],this.excludedDates=[],this.excludedDays=[],this.buttonClass="moj-datepicker__button",this.selectedDayButtonClass="moj-datepicker__button--selected",this.currentDayButtonClass="moj-datepicker__button--current",this.todayButtonClass="moj-datepicker__button--today",this.$module=t,this.$input=t.querySelector(".moj-js-datepicker-input")}function F(t,e,o,n,i){this.index=e,this.row=o,this.column=n,this.button=t,this.picker=i,this.date=new Date}function R(t){this.options=t,this.container=$(this.options.toggleButton.container),this.filterContainer=$(this.options.filter.container),this.createToggleButton(),this.setupResponsiveChecks(),this.filterContainer.attr("tabindex","-1"),this.options.startHidden&&this.hideMenu()}function P(t){void 0!==document.createElement("div").ondrop&&"function"==typeof FormData&&function(){const t=document.createElement("input");return t.type="file",void 0!==t.files}()&&(this.defaultParams={uploadFileEntryHook:$.noop,uploadFileExitHook:$.noop,uploadFileErrorHook:$.noop,fileDeleteHook:$.noop,uploadStatusText:"Uploading files, please wait",dropzoneHintText:"Drag and drop files here or",dropzoneButtonText:"Choose files"},this.params=$.extend({},this.defaultParams,t),this.container=$(this.params.container),this.container.addClass("moj-multi-file-upload--enhanced"),this.feedbackContainer=this.container.find(".moj-multi-file__uploaded-files"),this.setupFileInput(),this.setupDropzone(),this.setupLabel(),this.setupStatusBox(),this.container.on("click",".moj-multi-file-upload__delete",$.proxy(this,"onFileDeleteClick")))}function N(t){if(this.container=$(t.container),this.container.data("moj-multi-select-initialised"))return;this.container.data("moj-multi-select-initialised",!0);const e=t.id_prefix;let o="checkboxes-all";void 0!==e&&(o=`${e}checkboxes-all`),this.toggle=$(this.getToggleHtml(o)),this.toggleButton=this.toggle.find("input"),this.toggleButton.on("click",$.proxy(this,"onButtonClick")),this.container.append(this.toggle),this.checkboxes=$(t.checkboxes),this.checkboxes.on("click",$.proxy(this,"onCheckboxClick")),this.checked=t.checked||!1}function z(t){this.el=t;const e=$(this.el);e.data("moj-password-reveal-initialised")||(e.data("moj-password-reveal-initialised",!0),e.attr("spellcheck","false"),e.wrap('<div class="moj-password-reveal"></div>'),this.container=$(this.el).parent(),this.createButton())}function K(t){"contentEditable"in document.documentElement&&(this.options=t,this.options.toolbar=this.options.toolbar||{bold:!1,italic:!1,underline:!1,bullets:!0,numbers:!0},this.textarea=this.options.textarea,this.container=$(this.textarea).parent(),this.container.data("moj-rich-text-editor-initialised")||(this.container.data("moj-rich-text-editor-initialised",!0),this.createToolbar(),this.hideDefault(),this.configureToolbar(),this.keys={left:37,right:39,up:38,down:40},this.container.on("click",".moj-rich-text-editor__toolbar-button",$.proxy(this,"onButtonClick")),this.container.find(".moj-rich-text-editor__content").on("input",$.proxy(this,"onEditorInput")),this.container.find("label").on("click",$.proxy(this,"onLabelClick")),this.toolbar.on("keydown",$.proxy(this,"onToolbarKeydown"))))}function W(t){if(this.options=t,this.container=$(this.options.search.container),this.toggleButtonContainer=$(this.options.toggleButton.container),this.container.data("moj-search-toggle-initialised"))return;this.container.data("moj-search-toggle-initialised",!0);this.toggleButton=$(`<button class="moj-search-toggle__button" type="button" aria-haspopup="true" aria-expanded="false">\n      ${this.options.toggleButton.text} <svg viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="moj-search-toggle__button__icon"><path d="M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z"></path></svg>\n    </button>`),this.toggleButton.on("click",$.proxy(this,"onToggleButtonClick")),this.toggleButtonContainer.append(this.toggleButton),$(document).on("click",this.onDocumentClick.bind(this)),$(document).on("focusin",this.onDocumentClick.bind(this))}function Y(t){this.table=$(t.table),this.table.data("moj-search-toggle-initialised")||(this.table.data("moj-search-toggle-initialised",!0),this.setupOptions(t),this.body=this.table.find("tbody"),this.createHeadingButtons(),this.createStatusBox(),this.initialiseSortedColumn(),this.table.on("click","th button",$.proxy(this,"onSortButtonClick")))}j.moduleName="govuk-tabs",M.prototype.onAddButtonClick=function(t){const e=this.getNewItem();this.updateAttributes(this.getItems().length,e),this.resetItem(e);const o=this.getItems().first();this.hasRemoveButton(o)||this.createRemoveButton(o),this.getItems().last().after(e),e.find("input, textarea, select").first().focus()},M.prototype.hasRemoveButton=function(t){return t.find(".moj-add-another__remove-button").length},M.prototype.getItems=function(){return this.container.find(".moj-add-another__item")},M.prototype.getNewItem=function(){const t=this.getItems().first().clone();return this.hasRemoveButton(t)||this.createRemoveButton(t),t},M.prototype.updateAttributes=function(t,e){e.find("[data-name]").each((function(o,n){const i=n.id;n.name=$(n).attr("data-name").replace(/%index%/,t),n.id=$(n).attr("data-id").replace(/%index%/,t);($(n).siblings("label")[0]||$(n).parents("label")[0]||e.find(`[for="${i}"]`)[0]).htmlFor=n.id}))},M.prototype.createRemoveButton=function(t){t.append('<button type="button" class="govuk-button govuk-button--secondary moj-add-another__remove-button">Remove</button>')},M.prototype.resetItem=function(t){t.find("[data-name], [data-id]").each((function(t,e){"checkbox"===e.type||"radio"===e.type?e.checked=!1:e.value=""}))},M.prototype.onRemoveButtonClick=function(t){$(t.currentTarget).parents(".moj-add-another__item").remove();const e=this.getItems();1===e.length&&e.find(".moj-add-another__remove-button").remove(),e.each($.proxy((function(t,e){this.updateAttributes(t,$(e))}),this)),this.focusHeading()},M.prototype.focusHeading=function(){this.container.find(".moj-add-another__heading").get(0).focus()},H.prototype.init=function(){"alert"!==this.$module.getAttribute("role")||this.config.disableAutoFocus||I(this.$module),this.$dismissButton=this.$module.querySelector(".moj-alert__dismiss"),this.config.dismissible&&this.$dismissButton&&(this.$dismissButton.innerHTML=this.config.dismissText,this.$dismissButton.removeAttribute("hidden"),this.$module.addEventListener("click",(t=>{this.$dismissButton.contains(t.target)&&this.dimiss()})))},H.prototype.dimiss=function(){let t;if(this.config.focusOnDismissSelector&&(t=document.querySelector(this.config.focusOnDismissSelector)),!t){const e=this.$module.nextElementSibling;e&&e.matches(".moj-alert")&&(t=e)}t||(t=function(t,e){if(!t)return;let o=t.previousElementSibling;for(;o;){if(o.matches(e))return o;o=o.previousElementSibling}}(this.$module,".moj-alert, h1, h2, h3, h4, h5, h6")),t||(t=function(t,e){if(!t)return;let o=t;for(;o;){if(o.matches(e))return o;let t=o.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}o=o.parentElement}}(this.$module,"h1, h2, h3, h4, h5, h6, main, body")),t&&I(t),this.$module.remove()},H.prototype.normaliseString=function(t,e){const o=t?t.trim():"";let n,i;switch(e&&e.type&&(i=e.type),i||(["true","false"].includes(o)&&(i="boolean"),o.length>0&&isFinite(Number(o))&&(i="number")),i){case"boolean":n="true"===o;break;case"number":n=Number(o);break;default:n=t}return n},H.prototype.parseDataset=function(t,e){const o={};for(const[n,i]of Object.entries(t.properties))n in e&&e[n]&&(o[n]=this.normaliseString(e[n],i));return o},H.prototype.mergeConfigs=function(...t){const e={};for(const o of t)for(const t of Object.keys(o)){const n=e[t],i=o[t];e[t]="object"==typeof n&&"object"==typeof i?this.mergeConfigs(n,i):i}return e},O.prototype.init=function(){if(1===this.$module.children.length){const t=this.$module.children[0];t.classList.forEach((e=>{e.startsWith("govuk-button-")&&t.classList.remove(e),t.classList.remove("moj-button-menu__item")})),this.config.buttonClasses&&t.classList.add(...this.config.buttonClasses.split(" "))}this.$module.children.length>1&&this.initMenu()},O.prototype.initMenu=function(){this.$menu=this.createMenu(),this.$module.insertAdjacentHTML("afterbegin",this.toggleTemplate()),this.setupMenuItems(),this.$menuToggle=this.$module.querySelector(":scope > button"),this.items=this.$menu.querySelectorAll("a, button"),this.$menuToggle.addEventListener("click",(t=>{this.toggleMenu(t)})),this.$module.addEventListener("keydown",(t=>{this.handleKeyDown(t)})),document.addEventListener("click",(t=>{this.$module.contains(t.target)||this.closeMenu(!1)}))},O.prototype.createMenu=function(){const t=document.createElement("ul");for(t.setAttribute("role","list"),t.hidden=!0,t.classList.add("moj-button-menu__wrapper"),"right"===this.config.alignMenu&&t.classList.add("moj-button-menu__wrapper--right"),this.$module.appendChild(t);this.$module.firstChild!==t;)t.appendChild(this.$module.firstChild);return t},O.prototype.setupMenuItems=function(){Array.from(this.$menu.children).forEach((t=>{const e=document.createElement("li");this.$menu.insertBefore(e,t),e.appendChild(t),t.setAttribute("tabindex",-1),"BUTTON"===t.tagName&&t.setAttribute("type","button"),t.classList.forEach((e=>{e.startsWith("govuk-button")&&t.classList.remove(e)})),t.addEventListener("click",(t=>{setTimeout((()=>{this.closeMenu(!1)}),50)}))}))},O.prototype.toggleTemplate=function(){return`\n    <button type="button" class="govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses||""}" aria-haspopup="true" aria-expanded="false">\n      <span>\n       ${this.config.buttonText}\n       <svg width="11" height="5" viewBox="0 0 11 5"  xmlns="http://www.w3.org/2000/svg">\n         <path d="M5.5 0L11 5L0 5L5.5 0Z" fill="currentColor"/>\n       </svg>\n      </span>\n    </button>`},O.prototype.isOpen=function(){return"true"===this.$menuToggle.getAttribute("aria-expanded")},O.prototype.toggleMenu=function(t){t.preventDefault();const e=0===t.detail?0:-1;this.isOpen()?this.closeMenu():this.openMenu(e)},O.prototype.openMenu=function(t=0){this.$menu.hidden=!1,this.$menuToggle.setAttribute("aria-expanded","true"),-1!==t&&this.focusItem(t)},O.prototype.closeMenu=function(t=!0){this.$menu.hidden=!0,this.$menuToggle.setAttribute("aria-expanded","false"),t&&this.$menuToggle.focus()},O.prototype.focusItem=function(t){t>=this.items.length&&(t=0),t<0&&(t=this.items.length-1);const e=this.items.item(t);e&&e.focus()},O.prototype.currentFocusIndex=function(){const t=document.activeElement;return Array.from(this.items).indexOf(t)},O.prototype.handleKeyDown=function(t){if(t.target===this.$menuToggle)switch(t.key){case"ArrowDown":t.preventDefault(),this.openMenu();break;case"ArrowUp":t.preventDefault(),this.openMenu(this.items.length-1)}if(this.$menu.contains(t.target)&&this.isOpen())switch(t.key){case"ArrowDown":t.preventDefault(),-1!==this.currentFocusIndex()&&this.focusItem(this.currentFocusIndex()+1);break;case"ArrowUp":t.preventDefault(),-1!==this.currentFocusIndex()&&this.focusItem(this.currentFocusIndex()-1);break;case"Home":t.preventDefault(),this.focusItem(0);break;case"End":t.preventDefault(),this.focusItem(this.items.length-1)}"Escape"===t.key&&this.isOpen()&&this.closeMenu(),"Tab"===t.key&&this.isOpen()&&this.closeMenu(!1)},O.prototype.parseDataset=function(t,e){const o={};for(const[n,,]of Object.entries(t.properties))n in e&&e[n]&&(o[n]=e[n]);return o},O.prototype.mergeConfigs=function(...t){const e={};for(const o of t)for(const t of Object.keys(o)){const n=e[t],i=o[t];e[t]="object"==typeof n&&"object"==typeof i?this.mergeConfigs(n,i):i}return e},q.prototype.init=function(){this.$input&&(this.$module.dataset.initialized||(this.setOptions(),this.initControls(),this.$module.setAttribute("data-initialized","true")))},q.prototype.initControls=function(){this.id=`datepicker-${this.$input.id}`,this.$dialog=this.createDialog(),this.createCalendarHeaders();const t=document.createElement("div"),e=document.createElement("div");t.classList.add("moj-datepicker__wrapper"),e.classList.add("govuk-input__wrapper"),this.$input.parentNode.insertBefore(t,this.$input),t.appendChild(e),e.appendChild(this.$input),e.insertAdjacentHTML("beforeend",this.toggleTemplate()),t.insertAdjacentElement("beforeend",this.$dialog),this.$calendarButton=this.$module.querySelector(".moj-js-datepicker-toggle"),this.$dialogTitle=this.$dialog.querySelector(".moj-js-datepicker-month-year"),this.createCalendar(),this.$prevMonthButton=this.$dialog.querySelector(".moj-js-datepicker-prev-month"),this.$prevYearButton=this.$dialog.querySelector(".moj-js-datepicker-prev-year"),this.$nextMonthButton=this.$dialog.querySelector(".moj-js-datepicker-next-month"),this.$nextYearButton=this.$dialog.querySelector(".moj-js-datepicker-next-year"),this.$cancelButton=this.$dialog.querySelector(".moj-js-datepicker-cancel"),this.$okButton=this.$dialog.querySelector(".moj-js-datepicker-ok"),this.$prevMonthButton.addEventListener("click",(t=>this.focusPreviousMonth(t,!1))),this.$prevYearButton.addEventListener("click",(t=>this.focusPreviousYear(t,!1))),this.$nextMonthButton.addEventListener("click",(t=>this.focusNextMonth(t,!1))),this.$nextYearButton.addEventListener("click",(t=>this.focusNextYear(t,!1))),this.$cancelButton.addEventListener("click",(t=>{t.preventDefault(),this.closeDialog(t)})),this.$okButton.addEventListener("click",(()=>{this.selectDate(this.currentDate)}));const o=this.$dialog.querySelectorAll('button:not([disabled="true"])');this.$firstButtonInDialog=o[0],this.$lastButtonInDialog=o[o.length-1],this.$firstButtonInDialog.addEventListener("keydown",(t=>this.firstButtonKeydown(t))),this.$lastButtonInDialog.addEventListener("keydown",(t=>this.lastButtonKeydown(t))),this.$calendarButton.addEventListener("click",(t=>this.toggleDialog(t))),this.$dialog.addEventListener("keydown",(t=>{"Escape"===t.key&&(this.closeDialog(),t.preventDefault(),t.stopPropagation())})),document.body.addEventListener("mouseup",(t=>this.backgroundClick(t))),this.updateCalendar()},q.prototype.createDialog=function(){const t=`datepicker-title-${this.$input.id}`,e=document.createElement("div");return e.id=this.id,e.setAttribute("class","moj-datepicker__dialog"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-labelledby",t),e.innerHTML=this.dialogTemplate(t),e.hidden=!0,e},q.prototype.createCalendar=function(){const t=this.$dialog.querySelector("tbody");let e=0;for(let o=0;o<6;o++){const n=t.insertRow(o);for(let t=0;t<7;t++){const i=document.createElement("td"),s=document.createElement("button");i.appendChild(s),n.appendChild(i);const r=new F(s,e,o,t,this);r.init(),this.calendarDays.push(r),e++}}},q.prototype.toggleTemplate=function(){return`<button class="moj-datepicker__toggle moj-js-datepicker-toggle" type="button" aria-haspopup="dialog" aria-controls="${this.id}" aria-expanded="false">\n            <span class="govuk-visually-hidden">Choose date</span>\n            <svg width="32" height="24" focusable="false" class="moj-datepicker-icon" aria-hidden="true" role="img" viewBox="0 0 22 22">\n              <path\n                fill="currentColor"\n                fill-rule="evenodd"\n                clip-rule="evenodd"\n                d="M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z"\n              ></path>\n              <rect x="3.66669" width="1.46667" height="5.13333" rx="0.733333" fill="currentColor"></rect>\n              <rect x="16.8667" width="1.46667" height="5.13333" rx="0.733333" fill="currentColor"></rect>\n            </svg>\n          </button>`},q.prototype.dialogTemplate=function(t){return`<div class="moj-datepicker__dialog-header">\n            <div class="moj-datepicker__dialog-navbuttons">\n              <button class="moj-datepicker__button moj-js-datepicker-prev-year">\n                <span class="govuk-visually-hidden">Previous year</span>\n                <svg width="44" height="40" viewBox="0 0 44 40" fill="none" fill="none" focusable="false" aria-hidden="true" role="img">\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z" fill="currentColor"/>\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z" fill="currentColor"/>\n                </svg>\n              </button>\n\n              <button class="moj-datepicker__button moj-js-datepicker-prev-month">\n                <span class="govuk-visually-hidden">Previous month</span>\n                <svg width="44" height="40" viewBox="0 0 44 40" fill="none" focusable="false" aria-hidden="true" role="img">\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z" fill="currentColor"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id="${t}" class="moj-datepicker__dialog-title moj-js-datepicker-month-year" aria-live="polite">June 2020</h2>\n\n            <div class="moj-datepicker__dialog-navbuttons">\n              <button class="moj-datepicker__button moj-js-datepicker-next-month">\n                <span class="govuk-visually-hidden">Next month</span>\n                <svg width="44" height="40" viewBox="0 0 44 40" fill="none"  focusable="false" aria-hidden="true" role="img">\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z" fill="currentColor"/>\n                </svg>\n              </button>\n\n              <button class="moj-datepicker__button moj-js-datepicker-next-year">\n                <span class="govuk-visually-hidden">Next year</span>\n                <svg width="44" height="40" viewBox="0 0 44 40" fill="none" fill="none" focusable="false" aria-hidden="true" role="img">\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z" fill="currentColor"/>\n                  <path fill-rule="evenodd" clip-rule="evenodd" d="M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z" fill="currentColor"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class="moj-datepicker__calendar moj-js-datepicker-grid" role="grid" aria-labelledby="${t}">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class="govuk-button-group">\n            <button type="button" class="govuk-button moj-js-datepicker-ok">Select</button>\n            <button type="button" class="govuk-button govuk-button--secondary moj-js-datepicker-cancel">Close</button>\n          </div>`},q.prototype.createCalendarHeaders=function(){this.dayLabels.forEach((t=>{const e=`<th scope="col"><span aria-hidden="true">${t.substring(0,3)}</span><span class="govuk-visually-hidden">${t}</span></th>`;this.$dialog.querySelector("thead > tr").insertAdjacentHTML("beforeend",e)}))},q.prototype.leadingZeros=function(t,e=2){let o=t.toString();for(;o.length<e;)o=`0${o}`;return o},q.prototype.setOptions=function(){this.setMinAndMaxDatesOnCalendar(),this.setExcludedDates(),this.setExcludedDays(),this.setLeadingZeros(),this.setWeekStartDay()},q.prototype.setMinAndMaxDatesOnCalendar=function(){this.config.minDate&&(this.minDate=this.formattedDateFromString(this.config.minDate,null),this.minDate&&this.currentDate<this.minDate&&(this.currentDate=this.minDate)),this.config.maxDate&&(this.maxDate=this.formattedDateFromString(this.config.maxDate,null),this.maxDate&&this.currentDate>this.maxDate&&(this.currentDate=this.maxDate))},q.prototype.setExcludedDates=function(){this.config.excludedDates&&(this.excludedDates=this.config.excludedDates.replace(/\s+/," ").split(" ").map((t=>t.includes("-")?this.parseDateRangeString(t):this.formattedDateFromString(t))).flat().filter((t=>t)))},q.prototype.parseDateRangeString=function(t){const e=[],[o,n]=t.split("-").map((t=>this.formattedDateFromString(t,null)));if(o&&n){const t=new Date(o.getTime());for(;t<=n;)e.push(new Date(t)),t.setDate(t.getDate()+1)}return e},q.prototype.setExcludedDays=function(){if(this.config.excludedDays){const t=this.dayLabels.map((t=>t.toLowerCase()));"monday"===this.config.weekStartDay&&t.unshift(t.pop()),this.excludedDays=this.config.excludedDays.replace(/\s+/," ").toLowerCase().split(" ").map((e=>t.indexOf(e))).filter((t=>-1!==t))}},q.prototype.setLeadingZeros=function(){if("boolean"!=typeof this.config.leadingZeros){if("true"===this.config.leadingZeros.toLowerCase())return void(this.config.leadingZeros=!0);"false"===this.config.leadingZeros.toLowerCase()&&(this.config.leadingZeros=!1)}},q.prototype.setWeekStartDay=function(){const t=this.config.weekStartDay;t&&"sunday"===t.toLowerCase()?(this.config.weekStartDay="sunday",this.dayLabels.unshift(this.dayLabels.pop())):this.config.weekStartDay="monday"},q.prototype.isExcludedDate=function(t){if(this.minDate&&this.minDate>t)return!0;if(this.maxDate&&this.maxDate<t)return!0;for(const e of this.excludedDates)if(t.toDateString()===e.toDateString())return!0;return!!this.excludedDays.includes(t.getDay())},q.prototype.formattedDateFromString=function(t,e=new Date){let o=null;const n=/(\d{1,2})([-/,. ])(\d{1,2})\2(\d{4})/;if(!n.test(t))return e;const i=t.match(n),s=i[1],r=i[3],a=i[4];return o=new Date(`${a}-${r}-${s}`),o instanceof Date&&!isNaN(o)?o:e},q.prototype.formattedDateFromDate=function(t){return this.config.leadingZeros?`${this.leadingZeros(t.getDate())}/${this.leadingZeros(t.getMonth()+1)}/${t.getFullYear()}`:`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`},q.prototype.formattedDateHuman=function(t){return`${this.dayLabels[(t.getDay()+6)%7]} ${t.getDate()} ${this.monthLabels[t.getMonth()]} ${t.getFullYear()}`},q.prototype.backgroundClick=function(t){!this.isOpen()||this.$dialog.contains(t.target)||this.$input.contains(t.target)||this.$calendarButton.contains(t.target)||(t.preventDefault(),this.closeDialog())},q.prototype.firstButtonKeydown=function(t){"Tab"===t.key&&t.shiftKey&&(this.$lastButtonInDialog.focus(),t.preventDefault())},q.prototype.lastButtonKeydown=function(t){"Tab"!==t.key||t.shiftKey||(this.$firstButtonInDialog.focus(),t.preventDefault())},q.prototype.updateCalendar=function(){this.$dialogTitle.innerHTML=`${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`;const t=this.currentDate,e=new Date(t.getFullYear(),t.getMonth(),1);let o;o="monday"===this.config.weekStartDay?0===e.getDay()?6:e.getDay()-1:e.getDay(),e.setDate(e.getDate()-o);const n=new Date(e);for(let i=0;i<this.calendarDays.length;i++){const e=n.getMonth()!==t.getMonth(),o=this.isExcludedDate(n);this.calendarDays[i].update(n,e,o),n.setDate(n.getDate()+1)}},q.prototype.setCurrentDate=function(t=!0){const{currentDate:e}=this;if(this.calendarDays.forEach((o=>{o.button.classList.add("moj-datepicker__button"),o.button.classList.add("moj-datepicker__calendar-day"),o.button.setAttribute("tabindex",-1),o.button.classList.remove(this.selectedDayButtonClass);const n=o.date;n.setHours(0,0,0,0);const i=new Date;i.setHours(0,0,0,0),n.getTime()===e.getTime()&&t&&(o.button.setAttribute("tabindex",0),o.button.focus(),o.button.classList.add(this.selectedDayButtonClass)),this.inputDate&&n.getTime()===this.inputDate.getTime()?(o.button.classList.add(this.currentDayButtonClass),o.button.setAttribute("aria-current","date")):(o.button.classList.remove(this.currentDayButtonClass),o.button.removeAttribute("aria-current")),n.getTime()===i.getTime()?o.button.classList.add(this.todayButtonClass):o.button.classList.remove(this.todayButtonClass)})),!t){const t=this.calendarDays.filter((t=>"block"===window.getComputedStyle(t.button).display&&!t.button.disabled));t[0].button.setAttribute("tabindex",0),this.currentDate=t[0].date}},q.prototype.selectDate=function(t){if(this.isExcludedDate(t))return;this.$calendarButton.querySelector("span").innerText=`Choose date. Selected date is ${this.formattedDateHuman(t)}`,this.$input.value=this.formattedDateFromDate(t);const e=new Event("change",{bubbles:!0,cancelable:!0});this.$input.dispatchEvent(e),this.closeDialog()},q.prototype.isOpen=function(){return this.$dialog.classList.contains("moj-datepicker__dialog--open")},q.prototype.toggleDialog=function(t){t.preventDefault(),this.isOpen()?this.closeDialog():(this.setMinAndMaxDatesOnCalendar(),this.openDialog())},q.prototype.openDialog=function(){this.$dialog.hidden=!1,this.$dialog.classList.add("moj-datepicker__dialog--open"),this.$calendarButton.setAttribute("aria-expanded","true"),this.$input.offsetWidth>this.$dialog.offsetWidth&&(this.$dialog.style.right="0px"),this.$dialog.style.top=`${this.$input.offsetHeight+3}px`,this.inputDate=this.formattedDateFromString(this.$input.value),this.currentDate=this.inputDate,this.currentDate.setHours(0,0,0,0),this.updateCalendar(),this.setCurrentDate()},q.prototype.closeDialog=function(){this.$dialog.hidden=!0,this.$dialog.classList.remove("moj-datepicker__dialog--open"),this.$calendarButton.setAttribute("aria-expanded","false"),this.$calendarButton.focus()},q.prototype.goToDate=function(t,e){const o=this.currentDate;this.currentDate=t,o.getMonth()===this.currentDate.getMonth()&&o.getFullYear()===this.currentDate.getFullYear()||this.updateCalendar(),this.setCurrentDate(e)},q.prototype.focusNextDay=function(){const t=new Date(this.currentDate);t.setDate(t.getDate()+1),this.goToDate(t)},q.prototype.focusPreviousDay=function(){const t=new Date(this.currentDate);t.setDate(t.getDate()-1),this.goToDate(t)},q.prototype.focusNextWeek=function(){const t=new Date(this.currentDate);t.setDate(t.getDate()+7),this.goToDate(t)},q.prototype.focusPreviousWeek=function(){const t=new Date(this.currentDate);t.setDate(t.getDate()-7),this.goToDate(t)},q.prototype.focusFirstDayOfWeek=function(){const t=new Date(this.currentDate),e="sunday"===this.config.weekStartDay?0:1,o=t.getDay(),n=o>=e?o-e:6-o;t.setDate(t.getDate()-n),t.setHours(0,0,0,0),this.goToDate(t)},q.prototype.focusLastDayOfWeek=function(){const t=new Date(this.currentDate),e="sunday"===this.config.weekStartDay?6:0,o=t.getDay(),n=o<=e?e-o:7-o;t.setDate(t.getDate()+n),t.setHours(0,0,0,0),this.goToDate(t)},q.prototype.focusNextMonth=function(t,e=!0){t.preventDefault();const o=new Date(this.currentDate);o.setMonth(o.getMonth()+1,1),this.goToDate(o,e)},q.prototype.focusPreviousMonth=function(t,e=!0){t.preventDefault();const o=new Date(this.currentDate);o.setMonth(o.getMonth()-1,1),this.goToDate(o,e)},q.prototype.focusNextYear=function(t,e=!0){t.preventDefault();const o=new Date(this.currentDate);o.setFullYear(o.getFullYear()+1,o.getMonth(),1),this.goToDate(o,e)},q.prototype.focusPreviousYear=function(t,e=!0){t.preventDefault();const o=new Date(this.currentDate);o.setFullYear(o.getFullYear()-1,o.getMonth(),1),this.goToDate(o,e)},q.prototype.parseDataset=function(t,e){const o={};for(const[n,,]of Object.entries(t.properties))n in e&&(o[n]=e[n]);return o},q.prototype.mergeConfigs=function(...t){const e={};for(const o of t)for(const t of Object.keys(o)){const n=e[t],i=o[t];e[t]="object"==typeof n&&"object"==typeof i?this.mergeConfigs(n,i):i}return e},F.prototype.init=function(){this.button.addEventListener("keydown",this.keyPress.bind(this)),this.button.addEventListener("click",this.click.bind(this))},F.prototype.update=function(t,e,o){const n=t.getDate();let i=this.picker.formattedDateHuman(t);o?(this.button.setAttribute("aria-disabled",!0),i=`Excluded date, ${i}`):this.button.removeAttribute("aria-disabled"),this.button.style.display=e?"none":"block",this.button.setAttribute("data-testid",this.picker.formattedDateFromDate(t)),this.button.innerHTML=`<span class="govuk-visually-hidden">${i}</span><span aria-hidden="true">${n}</span>`,this.date=new Date(t)},F.prototype.click=function(t){this.picker.goToDate(this.date),this.picker.selectDate(this.date),t.stopPropagation(),t.preventDefault()},F.prototype.keyPress=function(t){let e=!0;switch(t.key){case"ArrowLeft":this.picker.focusPreviousDay();break;case"ArrowRight":this.picker.focusNextDay();break;case"ArrowUp":this.picker.focusPreviousWeek();break;case"ArrowDown":this.picker.focusNextWeek();break;case"Home":this.picker.focusFirstDayOfWeek();break;case"End":this.picker.focusLastDayOfWeek();break;case"PageUp":t.shiftKey?this.picker.focusPreviousYear(t):this.picker.focusPreviousMonth(t);break;case"PageDown":t.shiftKey?this.picker.focusNextYear(t):this.picker.focusNextMonth(t);break;default:e=!1}e&&(t.preventDefault(),t.stopPropagation())},R.prototype.setupResponsiveChecks=function(){this.mq=window.matchMedia(this.options.bigModeMediaQuery),this.mq.addListener($.proxy(this,"checkMode")),this.checkMode(this.mq)},R.prototype.createToggleButton=function(){this.menuButton=$(`<button class="govuk-button ${this.options.toggleButton.classes}" type="button" aria-haspopup="true" aria-expanded="false">${this.options.toggleButton.showText}</button>`),this.menuButton.on("click",$.proxy(this,"onMenuButtonClick")),this.container.append(this.menuButton)},R.prototype.checkMode=function(t){t.matches?this.enableBigMode():this.enableSmallMode()},R.prototype.enableBigMode=function(){this.showMenu(),this.removeCloseButton()},R.prototype.enableSmallMode=function(){this.hideMenu(),this.addCloseButton()},R.prototype.addCloseButton=function(){this.options.closeButton&&(this.closeButton=$(`<button class="moj-filter__close" type="button">${this.options.closeButton.text}</button>`),this.closeButton.on("click",$.proxy(this,"onCloseClick")),$(this.options.closeButton.container).append(this.closeButton))},R.prototype.onCloseClick=function(){this.hideMenu(),this.menuButton.focus()},R.prototype.removeCloseButton=function(){this.closeButton&&(this.closeButton.remove(),this.closeButton=null)},R.prototype.hideMenu=function(){this.menuButton.attr("aria-expanded","false"),this.filterContainer.addClass("moj-js-hidden"),this.menuButton.text(this.options.toggleButton.showText)},R.prototype.showMenu=function(){this.menuButton.attr("aria-expanded","true"),this.filterContainer.removeClass("moj-js-hidden"),this.menuButton.text(this.options.toggleButton.hideText)},R.prototype.onMenuButtonClick=function(){this.toggle()},R.prototype.toggle=function(){"false"===this.menuButton.attr("aria-expanded")?(this.showMenu(),this.filterContainer.get(0).focus()):this.hideMenu()},P.prototype.setupDropzone=function(){this.fileInput.wrap('<div class="moj-multi-file-upload__dropzone" />'),this.dropzone=this.container.find(".moj-multi-file-upload__dropzone"),this.dropzone.on("dragover",$.proxy(this,"onDragOver")),this.dropzone.on("dragleave",$.proxy(this,"onDragLeave")),this.dropzone.on("drop",$.proxy(this,"onDrop"))},P.prototype.setupLabel=function(){this.label=$(`<label for="${this.fileInput[0].id}" class="govuk-button govuk-button--secondary">${this.params.dropzoneButtonText}</label>`),this.dropzone.append(`<p class="govuk-body">${this.params.dropzoneHintText}</p>`),this.dropzone.append(this.label)},P.prototype.setupFileInput=function(){this.fileInput=this.container.find(".moj-multi-file-upload__input"),this.fileInput.on("change",$.proxy(this,"onFileChange")),this.fileInput.on("focus",$.proxy(this,"onFileFocus")),this.fileInput.on("blur",$.proxy(this,"onFileBlur"))},P.prototype.setupStatusBox=function(){this.status=$('<div aria-live="polite" role="status" class="govuk-visually-hidden" />'),this.dropzone.append(this.status)},P.prototype.onDragOver=function(t){t.preventDefault(),this.dropzone.addClass("moj-multi-file-upload--dragover")},P.prototype.onDragLeave=function(){this.dropzone.removeClass("moj-multi-file-upload--dragover")},P.prototype.onDrop=function(t){t.preventDefault(),this.dropzone.removeClass("moj-multi-file-upload--dragover"),this.feedbackContainer.removeClass("moj-hidden"),this.status.html(this.params.uploadStatusText),this.uploadFiles(t.originalEvent.dataTransfer.files)},P.prototype.uploadFiles=function(t){for(let e=0;e<t.length;e++)this.uploadFile(t[e])},P.prototype.onFileChange=function(t){this.feedbackContainer.removeClass("moj-hidden"),this.status.html(this.params.uploadStatusText),this.uploadFiles(t.currentTarget.files),this.fileInput.replaceWith($(t.currentTarget).val("").clone(!0)),this.setupFileInput(),this.fileInput.get(0).focus()},P.prototype.onFileFocus=function(t){this.label.addClass("moj-multi-file-upload--focused")},P.prototype.onFileBlur=function(t){this.label.removeClass("moj-multi-file-upload--focused")},P.prototype.getSuccessHtml=function(t){return`<span class="moj-multi-file-upload__success"> <svg class="moj-banner__icon" fill="currentColor" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" height="25" width="25"><path d="M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z"/></svg>${t.messageHtml}</span>`},P.prototype.getErrorHtml=function(t){return`<span class="moj-multi-file-upload__error"> <svg class="moj-banner__icon" fill="currentColor" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" height="25" width="25"><path d="M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z"/></svg>${t.message}</span>`},P.prototype.getFileRowHtml=function(t){return`\n    <div class="govuk-summary-list__row moj-multi-file-upload__row">\n      <div class="govuk-summary-list__value moj-multi-file-upload__message">\n        <span class="moj-multi-file-upload__filename">${t.name}</span>\n        <span class="moj-multi-file-upload__progress">0%</span>\n      </div>\n      <div class="govuk-summary-list__actions moj-multi-file-upload__actions"></div>\n    </div>`},P.prototype.getDeleteButtonHtml=function(t){return`<button class="moj-multi-file-upload__delete govuk-button govuk-button--secondary govuk-!-margin-bottom-0" type="button" name="delete" value="${t.filename}">\n      Delete <span class="govuk-visually-hidden">${t.originalname}</span>\n    </button>`},P.prototype.uploadFile=function(t){this.params.uploadFileEntryHook(this,t);const e=$(this.getFileRowHtml(t)),o=new FormData;o.append("documents",t),this.feedbackContainer.find(".moj-multi-file-upload__list").append(e),$.ajax({url:this.params.uploadUrl,type:"post",data:o,processData:!1,contentType:!1,success:$.proxy((function(o){o.error?(e.find(".moj-multi-file-upload__message").html(this.getErrorHtml(o.error)),this.status.html(o.error.message)):(e.find(".moj-multi-file-upload__message").html(this.getSuccessHtml(o.success)),this.status.html(o.success.messageText)),e.find(".moj-multi-file-upload__actions").append(this.getDeleteButtonHtml(o.file)),this.params.uploadFileExitHook(this,t,o)}),this),error:$.proxy((function(e,o,n){this.params.uploadFileErrorHook(this,t,e,o,n)}),this),xhr:function(){const t=new XMLHttpRequest;return t.upload.addEventListener("progress",(function(t){if(t.lengthComputable){let o=t.loaded/t.total;o=parseInt(100*o,10),e.find(".moj-multi-file-upload__progress").text(` ${o}%`)}}),!1),t}})},P.prototype.onFileDeleteClick=function(t){t.preventDefault();const e=$(t.currentTarget),o={};o[e[0].name]=e[0].value,$.ajax({url:this.params.deleteUrl,type:"post",dataType:"json",data:o,success:$.proxy((function(t){t.error||(e.parents(".moj-multi-file-upload__row").remove(),0===this.feedbackContainer.find(".moj-multi-file-upload__row").length&&this.feedbackContainer.addClass("moj-hidden")),this.params.fileDeleteHook(this,t)}),this)})},N.prototype.getToggleHtml=function(t){let e="";return e+='<div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">',e+=`  <input type="checkbox" class="govuk-checkboxes__input" id="${t}">`,e+=`  <label class="govuk-label govuk-checkboxes__label moj-multi-select__toggle-label" for="${t}">`,e+='    <span class="govuk-visually-hidden">Select all</span>',e+="  </label>",e+="</div>",e},N.prototype.onButtonClick=function(t){this.checked?(this.uncheckAll(),this.toggleButton[0].checked=!1):(this.checkAll(),this.toggleButton[0].checked=!0)},N.prototype.checkAll=function(){this.checkboxes.each($.proxy((function(t,e){e.checked=!0}),this)),this.checked=!0},N.prototype.uncheckAll=function(){this.checkboxes.each($.proxy((function(t,e){e.checked=!1}),this)),this.checked=!1},N.prototype.onCheckboxClick=function(t){t.target.checked?this.checkboxes.filter(":checked").length===this.checkboxes.length&&(this.toggleButton[0].checked=!0,this.checked=!0):(this.toggleButton[0].checked=!1,this.checked=!1)},z.prototype.createButton=function(){this.button=$('<button type="button" class="govuk-button govuk-button--secondary moj-password-reveal__button">Show <span class="govuk-visually-hidden">password</span></button>'),this.container.append(this.button),this.button.on("click",$.proxy(this,"onButtonClick"))},z.prototype.onButtonClick=function(){"password"===this.el.type?(this.el.type="text",this.button.html('Hide <span class="govuk-visually-hidden">password</span>')):(this.el.type="password",this.button.html('Show <span class="govuk-visually-hidden">password</span>'))},K.prototype.onToolbarKeydown=function(t){let e;switch(t.keyCode){case this.keys.right:case this.keys.down:{e=this.toolbar.find("button[tabindex=0]");const t=e.next("button");t[0]&&(t.focus(),e.attr("tabindex","-1"),t.attr("tabindex","0"));break}case this.keys.left:case this.keys.up:{e=this.toolbar.find("button[tabindex=0]");const t=e.prev("button");t[0]&&(t.focus(),e.attr("tabindex","-1"),t.attr("tabindex","0"));break}}},K.prototype.getToolbarHtml=function(){let t="";return t+='<div class="moj-rich-text-editor__toolbar" role="toolbar">',this.options.toolbar.bold&&(t+='<button class="moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--bold" type="button" data-command="bold"><span class="govuk-visually-hidden">Bold</span></button>'),this.options.toolbar.italic&&(t+='<button class="moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--italic" type="button" data-command="italic"><span class="govuk-visually-hidden">Italic</span></button>'),this.options.toolbar.underline&&(t+='<button class="moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--underline" type="button" data-command="underline"><span class="govuk-visually-hidden">Underline</span></button>'),this.options.toolbar.bullets&&(t+='<button class="moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--unordered-list" type="button" data-command="insertUnorderedList"><span class="govuk-visually-hidden">Unordered list</span></button>'),this.options.toolbar.numbers&&(t+='<button class="moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--ordered-list" type="button" data-command="insertOrderedList"><span class="govuk-visually-hidden">Ordered list</span></button>'),t+="</div>",t},K.prototype.getEnhancedHtml=function(t){return`${this.getToolbarHtml()}<div class="govuk-textarea moj-rich-text-editor__content" contenteditable="true" spellcheck="false"></div>`},K.prototype.hideDefault=function(){this.textarea=this.container.find("textarea"),this.textarea.addClass("govuk-visually-hidden"),this.textarea.attr("aria-hidden",!0),this.textarea.attr("tabindex","-1")},K.prototype.createToolbar=function(){this.toolbar=document.createElement("div"),this.toolbar.className="moj-rich-text-editor",this.toolbar.innerHTML=this.getEnhancedHtml(),this.container.append(this.toolbar),this.toolbar=this.container.find(".moj-rich-text-editor__toolbar"),this.container.find(".moj-rich-text-editor__content").html(this.textarea.val())},K.prototype.configureToolbar=function(){this.buttons=this.container.find(".moj-rich-text-editor__toolbar-button"),this.buttons.prop("tabindex","-1");this.buttons.first().prop("tabindex","0")},K.prototype.onButtonClick=function(t){document.execCommand($(t.currentTarget).data("command"),!1,null)},K.prototype.getContent=function(){return this.container.find(".moj-rich-text-editor__content").html()},K.prototype.onEditorInput=function(t){this.updateTextarea()},K.prototype.updateTextarea=function(){document.execCommand("defaultParagraphSeparator",!1,"p"),this.textarea.val(this.getContent())},K.prototype.onLabelClick=function(t){t.preventDefault(),this.container.find(".moj-rich-text-editor__content").focus()},W.prototype.showMenu=function(){this.toggleButton.attr("aria-expanded","true"),this.container.removeClass("moj-js-hidden"),this.container.find("input").first().get(0).focus()},W.prototype.hideMenu=function(){this.container.addClass("moj-js-hidden"),this.toggleButton.attr("aria-expanded","false")},W.prototype.onToggleButtonClick=function(){"false"===this.toggleButton.attr("aria-expanded")?this.showMenu():this.hideMenu()},W.prototype.onDocumentClick=function(t){$.contains(this.toggleButtonContainer[0],t.target)||$.contains(this.container[0],t.target)||this.hideMenu()},Y.prototype.setupOptions=function(t){t=t||{},this.statusMessage=t.statusMessage||"Sort by %heading% (%direction%)",this.ascendingText=t.ascendingText||"ascending",this.descendingText=t.descendingText||"descending"},Y.prototype.createHeadingButtons=function(){const t=this.table.find("thead th");let e;for(let o=0;o<t.length;o++)e=$(t[o]),e.attr("aria-sort")&&this.createHeadingButton(e,o)},Y.prototype.createHeadingButton=function(t,e){const o=t.text(),n=$(`<button type="button" data-index="${e}">${o}</button>`);t.text(""),t.append(n)},Y.prototype.createStatusBox=function(){this.status=$('<div aria-live="polite" role="status" aria-atomic="true" class="govuk-visually-hidden" />'),this.table.parent().append(this.status)},Y.prototype.initialiseSortedColumn=function(){const t=this.getTableRowsArray();this.table.find("th").filter('[aria-sort="ascending"], [aria-sort="descending"]').first().each(((e,o)=>{const n=$(o).attr("aria-sort"),i=$(o).find("button").attr("data-index"),s=this.sort(t,i,n);this.addRows(s)}))},Y.prototype.onSortButtonClick=function(t){const e=t.currentTarget.getAttribute("data-index"),o=$(t.currentTarget).parent().attr("aria-sort");let n;n="none"===o||"descending"===o?"ascending":"descending";const i=this.getTableRowsArray(),s=this.sort(i,e,n);this.addRows(s),this.removeButtonStates(),this.updateButtonState($(t.currentTarget),n)},Y.prototype.updateButtonState=function(t,e){t.parent().attr("aria-sort",e);let o=this.statusMessage;o=o.replace(/%heading%/,t.text()),o=o.replace(/%direction%/,this[`${e}Text`]),this.status.text(o)},Y.prototype.removeButtonStates=function(){this.table.find("thead th").attr("aria-sort","none")},Y.prototype.addRows=function(t){for(let e=0;e<t.length;e++)this.body.append(t[e])},Y.prototype.getTableRowsArray=function(){const t=[],e=this.body.find("tr");for(let o=0;o<e.length;o++)t.push(e[o]);return t},Y.prototype.sort=function(t,e,o){return t.sort(function(t,n){const i=$(t).find("td,th").eq(e),s=$(n).find("td,th").eq(e),r="ascending"===o?this.getCellValue(i):this.getCellValue(s),a="ascending"===o?this.getCellValue(s):this.getCellValue(i);return"string"==typeof r||"string"==typeof a?r.toString().localeCompare(a.toString()):r-a}.bind(this))},Y.prototype.getCellValue=function(t){const e=t.attr("data-sort-value")||t.html(),o=Number(e);return isNaN(o)?e:o};function V(t){const e=void 0!==(t=void 0!==t?t:{}).scope?t.scope:document;B(e.querySelectorAll('[data-module="moj-add-another"]'),(function(t){new M(t)}));B(e.querySelectorAll('[data-module="moj-multi-select"]'),(function(t){new N({container:t.querySelector(t.getAttribute("data-multi-select-checkbox")),checkboxes:t.querySelectorAll("tbody .govuk-checkboxes__input"),id_prefix:t.getAttribute("data-multi-select-idprefix")})}));B(e.querySelectorAll('[data-module="moj-password-reveal"]'),(function(t){new z(t)}));B(e.querySelectorAll('[data-module="moj-rich-text-editor"]'),(function(t){const e={textarea:$(t)},o=t.getAttribute("data-moj-rich-text-editor-toolbar");if(o){const t=o.split(",");e.toolbar={};for(const o in t)e.toolbar[t[o]]=!0}new K(e)}));B(e.querySelectorAll('[data-module="moj-search-toggle"]'),(function(t){new W({toggleButton:{container:$(t.querySelector(".moj-search-toggle__toggle")),text:t.getAttribute("data-moj-search-toggle-text")},search:{container:$(t.querySelector(".moj-search"))}})}));B(e.querySelectorAll('[data-module="moj-sortable-table"]'),(function(t){new Y({table:t})}));B(e.querySelectorAll('[data-module="moj-date-picker"]'),(function(t){new q(t,{}).init()}));B(e.querySelectorAll('[data-module="moj-button-menu"]'),(function(t){new O(t,{}).init()}));B(e.querySelectorAll('[data-module="moj-alert"]'),(function(t){new H(t,{}).init()}))}var U=Object.freeze({__proto__:null,AddAnother:M,Alert:H,ButtonMenu:O,DatePicker:q,FilterToggleButton:R,MultiFileUpload:P,MultiSelect:N,PasswordReveal:z,RichTextEditor:K,SearchToggle:W,SortableTable:Y,initAll:V,version:"0.0.0-development"});class Z extends HTMLElement{constructor(){super(),this.id||(this.id=`nav-${Date.now()}`),this.collapsibleItems.forEach(((t,e)=>{const o=t.querySelector("a"),n=t.querySelector("ul");if(!n)return;if(!o)return;const i=document.createElement("button");n.id||(n.id=`${this.id}-collapsible-nav-${e}`),i.setAttribute("aria-controls",n.id),i.setAttribute("aria-expanded",!0),i.classList.add("app-vertical-nav__toggle"),i.insertAdjacentHTML("afterbegin",o.innerHTML),t.replaceChild(i,o),this.isOpen(t)||this.close(t)})),this.addEventListener("click",this)}handleEvent(t){this[`on${t.type}`](t)}onclick(t){const e=t.target.closest("button");if(!e)return;const o=e.parentNode;o&&(this.isOpen(o)?this.close(o):(this.closeOpenItems(),this.open(o)))}isOpen(t){return t.classList.contains(this.openClass)}open(t){const e=t.querySelector("button"),o=t.querySelector("ul");e&&o&&(o.hidden=!1,t.classList.add(this.openClass),e.setAttribute("aria-expanded",!0))}close(t){const e=t.querySelector("button"),o=t.querySelector("ul");e&&o&&(o.hidden=!0,t.classList.remove(this.openClass),e.setAttribute("aria-expanded",!1))}closeOpenItems(){this.openItems.forEach((t=>this.close(t)))}get openClass(){return this.getAttribute("open-class")||"is-open"}get openItems(){return this.collapsibleItems.filter((t=>t.classList.contains(this.openClass)))}get collapsibleItems(){return Array.from(this.querySelectorAll("li")).filter((t=>t.querySelector("ul")))}}function G(t){this.$module=t}function J(){dataLayer.push(arguments)}function X(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}G.prototype.init=function(){if(!this.$module)return;this.$module.querySelector('[name="accept"]').addEventListener("click",this.accept.bind(this));this.$module.querySelector('[name="reject"]').addEventListener("click",this.reject.bind(this));const t=localStorage.getItem("mojpl-cookies");if(t){const e=JSON.parse(t);this.load(e)}else this.$module.hidden=!1},G.prototype.load=function(t){t.analytics?(window.dataLayer=window.dataLayer||[],J("js",new Date),J("config","G-VTGX4YLSVL")):window["ga-disable-G-VTGX4YLSVL"]=!0,this.hideMessage()},G.prototype.hideMessage=function(){this.$module.hasAttribute("data-persistent")||(this.$module.hidden=!0)},G.prototype.accept=function(){const t={analytics:!0};localStorage.setItem("mojpl-cookies",JSON.stringify(t)),this.load(t)},G.prototype.reject=function(){localStorage.setItem("mojpl-cookies",JSON.stringify({analytics:!1})),window.location.reload()};var Q,tt={exports:{}};var et,ot=Q?tt.exports:(Q=1,et=function(){return function(){var t={686:function(t,e,o){o.d(e,{default:function(){return $}});var n=o(279),i=o.n(n),s=o(370),r=o.n(s),a=o(817),l=o.n(a);function c(t){try{return document.execCommand(t)}catch(e){return!1}}var u=function(t){var e=l()(t);return c("cut"),e},h=function(t,e){var o=function(t){var e="rtl"===document.documentElement.getAttribute("dir"),o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=t,o}(t);e.container.appendChild(o);var n=l()(o);return c("copy"),o.remove(),n},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},o="";return"string"==typeof t?o=h(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?o=h(t.value,e):(o=l()(t),c("copy")),o};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,o=void 0===e?"copy":e,n=t.container,i=t.target,s=t.text;if("copy"!==o&&"cut"!==o)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==p(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===o&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===o&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return s?d(s,{container:n}):i?"cut"===o?u(i):d(i,{container:n}):void 0};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function g(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e){return b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},b(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n,i,s=v(t);if(e){var r=v(this).constructor;o=Reflect.construct(s,arguments,r)}else o=s.apply(this,arguments);return n=this,!(i=o)||"object"!==f(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function w(t,e){var o="data-clipboard-".concat(t);if(e.hasAttribute(o))return e.getAttribute(o)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(s,t);var e,o,n,i=y(s);function s(t,e){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=i.call(this)).resolveOptions(e),o.listenClick(t),o}return e=s,o=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===f(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=r()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,o=this.action(e)||"copy",n=m({action:o,container:this.container,target:this.target(e),text:this.text(e)});this.emit(n?"success":"error",{action:o,text:n,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return w("action",t)}},{key:"defaultTarget",value:function(t){var e=w("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return w("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],n=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return d(t,e)}},{key:"cut",value:function(t){return u(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,o=!!document.queryCommandSupported;return e.forEach((function(t){o=o&&!!document.queryCommandSupported(t)})),o}}],o&&g(e.prototype,o),n&&g(e,n),s}(i()),$=k},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,o){var n=o(828);function i(t,e,o,n,i){var r=s.apply(this,arguments);return t.addEventListener(o,r,i),{destroy:function(){t.removeEventListener(o,r,i)}}}function s(t,e,o,i){return function(o){o.delegateTarget=n(o.target,e),o.delegateTarget&&i.call(t,o)}}t.exports=function(t,e,o,n,s){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof o?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return i(t,e,o,n,s)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var o=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,o){var n=o(879),i=o(438);t.exports=function(t,e,o){if(!t&&!e&&!o)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(o))throw new TypeError("Third argument must be a Function");if(n.node(t))return function(t,e,o){return t.addEventListener(e,o),{destroy:function(){t.removeEventListener(e,o)}}}(t,e,o);if(n.nodeList(t))return function(t,e,o){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,o)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,o)}))}}}(t,e,o);if(n.string(t))return function(t,e,o){return i(document.body,t,e,o)}(t,e,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var o=t.hasAttribute("readonly");o||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),o||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i),e=n.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,o){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:o}),this},once:function(t,e,o){var n=this;function i(){n.off(t,i),e.apply(o,arguments)}return i._=e,this.on(t,i,o)},emit:function(t){for(var e=[].slice.call(arguments,1),o=((this.e||(this.e={}))[t]||[]).slice(),n=0,i=o.length;n<i;n++)o[n].fn.apply(o[n].ctx,e);return this},off:function(t,e){var o=this.e||(this.e={}),n=o[t],i=[];if(n&&e)for(var s=0,r=n.length;s<r;s++)n[s].fn!==e&&n[s].fn._!==e&&i.push(n[s]);return i.length?o[t]=i:delete o[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}return o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o(686)}().default},tt.exports=et()),nt=X(ot);function it(t){this.$module=t}it.prototype.init=function(){const t=this.$module;if(!t)return;const e=document.createElement("button");e.className="app-copy-button js-copy-button",e.setAttribute("aria-live","assertive"),e.textContent="Copy code",t.insertBefore(e,t.firstChild),this.copyAction()},it.prototype.copyAction=function(){const t=this.$module.querySelector("pre");try{new nt(".js-copy-button",{target:function(){return t}}).on("success",(function(t){t.trigger.textContent="Code copied",t.clearSelection(),setTimeout((function(){t.trigger.textContent="Copy code"}),5e3)}))}catch(e){e&&console.log(e.message)}};class st{constructor(t){this.iframe=t,this.observer=null,this.contentWindow=null,this.init=this.init.bind(this),this.cleanup=this.cleanup.bind(this),this.onLoad=this.onLoad.bind(this),this.onResize=this.onResize.bind(this),this.onMutation=this.onMutation.bind(this),this.iframe.addEventListener("load",this.onLoad)}init(){try{this.contentWindow=this.iframe.contentWindow,this.resizeObserver=new ResizeObserver((t=>{for(const e of t)this.onResize(e)})),this.mutationObserver=new MutationObserver((t=>{for(const e of t)this.onMutation(e)}));const t=this.contentWindow.document.body;this.resizeObserver.observe(t),this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["style","class","hidden","aria-expanded"],attributeOldValue:!0,childList:!0,subtree:!0}),this.adjustSize()}catch(t){console.error("Failed to initialize IframeResizer:",t)}}onLoad(){this.init()}onMutation(t){this.adjustSize()}onResize(t){this.adjustSize()}adjustSize(){if(this.contentWindow)try{const t=this.contentWindow.document.body,e=this.contentWindow.document.documentElement,o=t.getElementsByTagName("*");let n=e.offsetHeight;const i=30;for(const s of o){const t=s.getBoundingClientRect(),e=t.top+t.height;n=n>e?n:e+i}this.iframe.style.height=`${n}px`}catch(t){console.error("Failed to adjust iframe size:",t)}}cleanup(){this.resizeObserver&&this.resizeObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),this.iframe.removeEventListener("load",this.onLoad)}}class rt extends HTMLElement{constructor(){super(),this.menuSelector=this.getAttribute("menu"),this.$menu=document.querySelector(this.menuSelector),this.$button=this.querySelector("button"),this.$menu?this.$button?this.$menu.id?(this.$button.setAttribute("aria-controls",this.$menu.id),this.addEventListener("click",this),this.breakpoint&&Number.isInteger(this.breakpoint)&&window.addEventListener("resize",(t=>{this.onresize(t)})),this.windowWidth=window.innerWidth,this.setState()):console.error("Menu element must have an id attribute"):console.error("Menu toggle element must contain a button element"):console.error("Menu element must exist ")}handleEvent(t){this[`on${t.type}`](t)}onclick(t){this.toggleMenu()}onresize(t){window.innerWidth!==this.windowWidth&&(this.windowWidth=window.innerWidth,this.setState())}setState(){document.documentElement.clientWidth>=this.breakpoint?(this.hideToggle(),this.showMenu()):(this.showToggle(),this.hideMenu())}toggleMenu(){this.$menu.hidden?this.showMenu():this.hideMenu()}hideToggle(){this.hidden=!0}showToggle(){this.hidden=!1}hideMenu(){this.$menu.hidden=!0,this.$button.setAttribute("aria-expanded",!1)}showMenu(){this.$menu.hidden=!1,this.$button.setAttribute("aria-expanded",!0)}get breakpoint(){return parseInt(this.getAttribute("breakpoint"))}}const at=function(t){this.container=t,this.keys={left:37,right:39,up:38,down:40},this.cssHide="app-tabs__panel--hidden",this.tabs=t.find(".app-tabs__tab"),this.panels=t.find(".app-tabs__panel"),this.container.on("click","[role=tab]",$.proxy(this,"onTabClick")),this.container.on("keydown","[role=tab]",$.proxy(this,"onTabKeydown")),this.container.on("click",".app-tabs__close",$.proxy(this,"onCloseButtonClick")),this.setupHtml()};at.prototype.hasTab=function(t){return this.container.find(t).length},at.prototype.hideTab=function(t){this.unhighlightTab(t),this.hidePanel(t)},at.prototype.showTab=function(t){this.highlightTab(t),this.showPanel(t)},at.prototype.getTab=function(t){return this.tabs.filter(`a[href="${t}"]`)},at.prototype.setupHtml=function(){this.container.find(".app-tabs__list").attr("role","tablist"),this.container.find(".app-tabs__list-item").attr("role","presentation"),this.tabs.attr("role","tab"),this.panels.attr("role","tabpanel"),this.tabs.each($.proxy((function(t,e){const o=this.getHref($(e)).slice(1);e.id=`tab_${o}`,$(e).attr("aria-controls",o)}),this)),this.panels.each($.proxy((function(t,e){$(e).attr("aria-labelledby",this.tabs[t].id)}),this)),this.panels.addClass(this.cssHide)},at.prototype.onTabClick=function(t){t.preventDefault();const e=$(t.target),o=this.getCurrentTab();o[0]&&this.hideTab(o),e[0]!==o[0]&&this.showTab(e)},at.prototype.onTabKeydown=function(t){switch(t.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),t.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),t.preventDefault()}},at.prototype.activateNextTab=function(){const t=this.getCurrentTab(),e=t.parent().next().find("[role=tab]");e[0]&&(this.hideTab(t),this.showTab(e),e.focus(),this.createHistoryEntry(e))},at.prototype.activatePreviousTab=function(){const t=this.getCurrentTab(),e=t.parent().prev().find("[role=tab]");e[0]&&(this.hideTab(t),this.showTab(e),e.focus(),this.createHistoryEntry(e))},at.prototype.getPanel=function(t){return $(this.getHref(t))},at.prototype.showPanel=function(t){$(this.getHref(t)).removeClass(this.cssHide)},at.prototype.hidePanel=function(t){$(this.getHref(t)).addClass(this.cssHide)},at.prototype.unhighlightTab=function(t){t.attr("aria-selected","false")},at.prototype.highlightTab=function(t){t.attr("aria-selected","true")},at.prototype.getCurrentTab=function(){return this.container.find("[role=tab][aria-selected=true]")},at.prototype.getHref=function(t){const e=t.attr("href");return e.slice(e.indexOf("#"),e.length)},at.prototype.onCloseButtonClick=function(t){const e=this.getCurrentTab();this.hideTab(e),this.tabs.first().focus()},function(t){var e;if(t=void 0!==t?t:{},!n())return void(t.onError?t.onError(new a,{config:t}):console.log(new a));const o=[[y,t.accordion],[v,t.button],[k,t.characterCount],[x],[C,t.errorSummary],[T,t.exitThisPage],[L],[_,t.notificationBanner],[S,t.passwordInput],[A],[E],[D],[j]],i={scope:null!=(e=t.scope)?e:document,onError:t.onError};o.forEach((([t,e])=>{!function(t,e,o){let i,s=document;if("object"==typeof o){var r;s=null!=(r=o.scope)?r:s,i=o.onError}"function"==typeof o&&(i=o);o instanceof HTMLElement&&(s=o);const l=s.querySelectorAll(`[data-module="${t.moduleName}"]`);if(!n())return i?i(new a,{component:t,config:e}):console.log(new a),[];Array.from(l).map((o=>{try{return void 0!==e?new t(o,e):new t(o)}catch(n){return i?i(n,{element:o,component:t,config:e}):console.log(n),null}})).filter(Boolean)}(t,e,i)}))}(),V(),$((function(){$('[data-module="app-tabs"]').each((function(t,e){new at($(e))})),$('[data-module="app-copy"]').each((function(t,e){new it(e).init()})),$('[data-module="app-cookies"]').each((function(t,e){new G(e).init()}));document.querySelectorAll("iframe").forEach((t=>new st(t)))})),window.MOJFrontend=U,window.customElements.define("moj-menu-toggle",rt),window.customElements.define("moj-collapsible-nav",Z);

      </script> #}

  <script type="text/javascript" nonce="{{ cspNonce }}">
    document.addEventListener("DOMContentLoaded", function() {
      const printBtn = document.getElementById('print-link');

      function printHandler () {
        window.print();
      }

      if (printBtn) {
        printBtn.addEventListener('click', printHandler)

        window.addEventListener('beforeunload', function () {
          printBtn.removeEventListener('click', printHandler)
        })
      }
    })
  </script>

{% endblock %}
