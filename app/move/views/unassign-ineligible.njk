{% extends "form-wizard.njk" %}

{% block pageTitle %}
  {{ t("validation::page_title_prefix") }}: {{ t("validation::assign_conflict.heading") }}
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: t("actions::back_to_allocation"),
    href: "/allocation/" + allocation.id
  }) }}

  {{ super() }}
{% endblock %}

{% block contentHeader %}
  {% set errorMsg %}
    <p class="govuk-!-margin-top-4">
      {{ t("validation::unassign_ineligible.message", {
        href: "/move/" + existingMoveId,
        name: person.fullname | upper,
        location: move.to_location.title,
        date: move.date | formatDateWithDay
      }) | safe }}
    </p>

    <p class="govuk-!-margin-top-2">
      {{ t("validation::unassign_ineligible.instructions", {
        allocation_href: "/allocation/" + allocation.id,
        move_href: "/move/" + moveId,
        name: fullname,
        count: allocation.moves_count,
        from_location: allocation.from_location.title,
        to_location: allocation.to_location.title
      }) | safe }}
    </p>
  {% endset %}

  {{ appMessage({
    focusOnload: true,
    classes: "app-message--error",
    title: {
      text: t("validation::unassign_ineligible.heading")
    },
    content: {
      html: errorMsg
    }
  }) }}
{% endblock %}

{% block contentMain %}
{% endblock %}
