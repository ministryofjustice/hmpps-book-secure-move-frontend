{% extends "layouts/base.njk" %}

{% block skipLink %}
{% endblock %}

{% block header %}
{% endblock %}

{% block main %}
  <div class="govuk-!-padding-5">
    <header class="govuk-!-margin-bottom-4">
      <h1 class="govuk-heading-l govuk-!-margin-bottom-0">
        {{ fullname | upper }}
      </h1>
      <span class="govuk-caption-l">
        {{ t("moves::move_reference", {
          reference: reference
        }) }}
      </span>
    </header>

    {# TODO: Make this view a bit more dynamic and built from the controller #}
    <section class="app-!-position-relative govuk-!-margin-bottom-7">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-padding-top-2 app-border-top-2 app-border--black">
        {{ t("assessment::heading.text", {
          context: "move"
        }) }}
      </h2>

      {{ govukSummaryList(moveSummary) }}
    </section>

    {% if courtSummary.rows | length or courtHearings | length %}
      <section class="app-!-position-relative govuk-!-margin-bottom-7">
        <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-padding-top-2 app-border-top-2 app-border--black">
          {{ t("assessment::heading.text", {
            context: "court"
          }) }}
        </h2>

        {% if courtSummary.rows | length %}
          {{ govukSummaryList(courtSummary) }}
        {% endif %}

        {% for courtHearing in courtHearings %}
          {% if courtHearings.length > 1 %}
            <h3 class="govuk-heading-s govuk-!-margin-bottom-2 govuk-!-margin-top-6">
              {{ t("moves::detail.court_hearings.subheading", {
                context: "with_index",
                index: loop.index
              }) }}
            </h3>
          {% endif %}

          {{ govukSummaryList(courtHearing.summaryList) }}
        {% endfor %}
      </section>
    {% endif %}

    <section class="app-!-position-relative govuk-!-margin-bottom-7">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-padding-top-2 app-border-top-2 app-border--black">
        {{ t("moves::steps.personal_details.heading") }}
      </h2>

      {{ govukSummaryList(personalDetailsSummary) }}
    </section>

    {% for section in personEscortRecordSections %}
      <section class="app-!-position-relative govuk-!-margin-bottom-7">
        <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-padding-top-2 app-border-top-2 app-border--black">
          {{ section.name }}
        </h2>

        {% for key, step in section.summarySteps %}
          <section class="app-!-position-relative govuk-!-margin-bottom-3">
            <h3 class="govuk-heading-s govuk-!-margin-bottom-0 govuk-!-padding-bottom-1 app-border-bottom-1">
              {{ step.pageTitle }}
            </h3>

            {{ govukSummaryList(step.summaryListComponent) }}
          </section>
        {% endfor %}
      </section>
    {% endfor %}
  </div>
{% endblock %}

{% block footer %}
{% endblock %}
